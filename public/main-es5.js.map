{"version":3,"sources":["webpack:///jsdom (ignored)","webpack:///jsdom/lib/jsdom/living/generated/utils (ignored)","webpack:///jsdom/lib/jsdom/utils (ignored)","webpack:///src/app/paint/toolbar/colour-palette/colour-palette.component.ts","webpack:///src/app/paint/toolbar/colour-palette/colour-palette.component.html","webpack:///src/app/shared/routing/app-routing.module.ts","webpack:///src/environments/environment.ts","webpack:///src/app/paint/paint.component.ts","webpack:///src/app/paint/paint.component.html","webpack:///src/app/shared/services/auth.service.ts","webpack:///src/app/components/dashboard/dashboard.component.ts","webpack:///src/app/components/dashboard/dashboard.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/components/verify-email/verify-email.component.ts","webpack:///src/app/components/verify-email/verify-email.component.html","webpack:///src/app/paint/models.ts","webpack:///src/app/paint/shape.service.ts","webpack:///src/app/components/sign-in/sign-in.component.ts","webpack:///src/app/components/sign-in/sign-in.component.html","webpack:///src/app/paint/event-handler.service.ts","webpack:///src/app/app.module.ts","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/shared/guard/auth.guard.ts","webpack:///src/app/paint/toolbar/toolbar.component.ts","webpack:///src/app/paint/toolbar/toolbar.component.html","webpack:///src/app/paint/toolbar/thickness-slider/thickness-slider.component.ts","webpack:///src/app/paint/toolbar/thickness-slider/thickness-slider.component.html","webpack:///src/app/components/forgot-password/forgot-password.component.ts","webpack:///src/app/components/forgot-password/forgot-password.component.html","webpack:///src/app/paint/fabric-canvas/fabric-canvas.component.ts","webpack:///src/app/paint/fabric-canvas/fabric-canvas.component.html","webpack:///src/app/components/sign-up/sign-up.component.ts","webpack:///src/app/components/sign-up/sign-up.component.html","webpack:///src/main.ts"],"names":["ColourPaletteComponent","fabricService","colours","Object","values","selectedColour","colour","selector","templateUrl","styleUrls","routes","path","redirectTo","pathMatch","component","canActivate","AppRoutingModule","forRoot","imports","exports","environment","production","firebase","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","PaintComponent","imageDataURL","AuthService","afs","router","ngZone","afAuth","onAuthStateChanged","user","userData","localStorage","setItem","JSON","stringify","parse","getItem","data","isJson","ref","uid","set","currentUser","once","snapshot","val","email","password","signInWithEmailAndPassword","then","result","window","alert","run","navigate","SetUserData","error","message","createUserWithEmailAndPassword","SendVerificationMail","sendEmailVerification","passwordResetEmail","sendPasswordResetEmail","AuthLogin","GoogleAuthProvider","provider","signInWithPopup","userRef","doc","displayName","photoURL","emailVerified","merge","signOut","removeItem","providedIn","str","e","DashboardComponent","authService","AppComponent","title","VerifyEmailComponent","DrawingColours","DrawingThickness","DrawingTools","FabricObjectType","FabricShapeService","object","type","RECT","fill","setOpacity","LINE","PATH","stroke","to","opacityOfRGBA","RegExp","replace","canvas","url","Image","fromURL","oImg","scale","add","thickness","pointer","rect","Rect","left","x","top","y","strokeWidth","WHITE","width","height","selectable","hasRotatingPoint","id","selectedThickness","Path","dashArray","line","Line","strokeDashArray","selection","initPos","Math","abs","min","setCoords","newLine","push","x2","y2","remove","newPath","SaveCanvas","LoadCanvas","loadFromJSON","SignInComponent","RANGE_AROUND_CENTER","EventHandlerService","fabricShapeService","_selectedTool","SELECT","_selectedColour","BLACK","THIN","_isMouseDown","createImage","save","load","imageDataUrl","Promise","resolve","reject","img","onload","f_img","setWidth","setHeight","setBackgroundImage","onerror","src","getPointer","_initPositionOfElement","RECTANGLE","_elementUnderDrawing","createRectangle","PENCIL","createPath","createLine","DASHED_LINE","formRectangle","formPath","formLine","renderAll","finishPath","prototype","toObject","util","extend","call","previousLeft","previousTop","previousScaleX","scaleX","previousScaleY","scaleY","ERASER","FILL","fillShape","newLeft","newTop","diffX","diffY","newScales","newCoords","scaleDiffX","scaleDiffY","objectMoving","isSelectable","forEachObject","obj","t","discardActiveObject","objectsSelectable","selectedTool","GARBAGE","background","backgroundImage","clear","IMAGE","reader","FileReader","onloadend","event","target","c","AppModule","initializeApp","declarations","providers","bootstrap","webpackEmptyAsyncContext","req","Error","code","keys","module","AuthGuard","next","state","isLoggedIn","GraphicalToolbarComponent","selected","tool","input","inputImage","srcElement","files","readAsDataURL","select","readFile","ThicknessSliderComponent","eventHandler","max","THICK","smallStep","v","ForgotPasswordComponent","FabricCanvasComponent","runOutsideAngular","dispose","Canvas","preserveObjectStacking","extendToObjectWithId","objectCaching","addEventListeners","setInterval","addBGImageSrcToCanvas","on","onCanvasMouseDown","onCanvasMouseMove","onCanvasMouseUp","onSelectionCreated","onSelectionUpdated","onObjectMoving","onObjectScaling","mouseDown","avoidDragAndClickEventsOfOtherUILibs","mouseMove","mouseUp","objectSelected","objectScaling","stopPropagation","SignUpComponent","bootstrapModule","err","console"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACCE;;AAIK;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA2B;;;;;;;;AAH3B,gKAAwC,SAAxC,EAAwC,0GAAxC;;;;UDOMA,sB;AAIX,wCAAoBC,aAApB,EAAwD;AAAA;;AAApC,eAAAA,aAAA,GAAAA,aAAA;AAHb,eAAAC,OAAA,GAAUC,MAAM,CAACC,MAAP,CAAc,sDAAd,CAAV;AAIL,eAAKC,cAAL,GAAsBJ,aAAa,CAACI,cAApC;AACD;;;;mCAEQC,M,EAAwB;AAC/B,iBAAKL,aAAL,CAAmBI,cAAnB,GAAoCC,MAApC;AACA,iBAAKD,cAAL,GAAsB,KAAKJ,aAAL,CAAmBI,cAAzC;AACD;;;;;;;yBAXUL,sB,EAAsB,2I;AAAA,O;;;cAAtBA,sB;AAAsB,2C;AAAA,gB;AAAA,e;AAAA,mN;AAAA;AAAA;ACTnC;;AACE;;AAKF;;;;AALO;;AAAA;;;;;;;;;wEDQMA,sB,EAAsB;gBALlC,uDAKkC;iBALxB;AACTO,oBAAQ,EAAE,oBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,iCAAD;AAHF,W;AAKwB,U;;;;;;;;;;;;;;;;;;;;;;AETnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAWA,UAAMC,MAAM,GAAW,CACrB;AAAEC,YAAI,EAAE,EAAR;AAAYC,kBAAU,EAAE,UAAxB;AAAoCC,iBAAS,EAAE;AAA/C,OADqB,EAErB;AAAEF,YAAI,EAAE,SAAR;AAAmBG,iBAAS,EAAE;AAA9B,OAFqB,EAGrB;AAAEH,YAAI,EAAE,eAAR;AAAyBG,iBAAS,EAAE;AAApC,OAHqB,EAIrB;AAAEH,YAAI,EAAE,WAAR;AAAqBG,iBAAS,EAAE,4FAAhC;AAAoDC,mBAAW,EAAE,CAAC,kEAAD;AAAjE,OAJqB,EAKrB;AAAEJ,YAAI,EAAE,iBAAR;AAA2BG,iBAAS,EAAE;AAAtC,OALqB,EAMrB;AAAEH,YAAI,EAAE,sBAAR;AAAgCG,iBAAS,EAAE;AAA3C,OANqB,CAAvB;;UAcaE,gB;;;;;cAAAA;;;;2BAAAA,gB;AAAgB,S;AAAA,kBAJlB,CAAC,6DAAaC,OAAb,CAAqBP,MAArB,CAAD,CAIkB,EAHjB,4DAGiB;;;;4HAAhBM,gB,EAAgB;AAAA;AAAA,oBAHjB,4DAGiB;AAAA,S;AAHL,O;;;;;wEAGXA,gB,EAAgB;gBAL5B,sDAK4B;iBALnB;AACRE,mBAAO,EAAE,CAAC,6DAAaD,OAAb,CAAqBP,MAArB,CAAD,CADD;AAERS,mBAAO,EAAE,CAAC,4DAAD;AAFD,W;AAKmB,U;;;;;;;;;;;;;;;;;;ACzB7B;AAAA;;;AAAA;AAAA;AAAA,S,CAAA;AACA;AACA;;;AAEO,UAAMC,WAAW,GAAG;AACzBC,kBAAU,EAAE,KADa;AAEzB;AACAC,gBAAQ,EAAE;AACRC,gBAAM,EAAE,yCADA;AAERC,oBAAU,EAAE,8BAFJ;AAGRC,mBAAS,EAAE,cAHH;AAIRC,uBAAa,EAAE,0BAJP;AAKRC,2BAAiB,EAAE,cALX;AAMRC,eAAK,EAAE,2CANC;AAORC,uBAAa,EAAE;AAPP;AAHe,OAApB;AAcP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACzBA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOaC,c,GALb;AAAA;;AAME,aAAAC,YAAA,GAAe,wBAAf;AACD,O;;;yBAFYD,c;AAAc,O;;;cAAdA,c;AAAc,kC;AAAA,gB;AAAA,e;AAAA,sF;AAAA;AAAA;ACP3B;;AACE;;AACE;;AACF;;AACA;;AACE;;AACF;;AACF;;;;AALuB;;AAAA;;;;;;;;;wEDKVA,c,EAAc;gBAL1B,uDAK0B;iBALhB;AACTvB,oBAAQ,EAAE,WADD;AAETC,uBAAW,EAAE,wBAFJ;AAGTC,qBAAS,EAAE,CAAC,wBAAD;AAHF,W;AAKgB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UEKduB,W;AAGX,6BACSC,GADT,EACgC;AACvBC,cAFT,EAGSC,MAHT,CAGwB;AAHxB,U;;;;;AACS,eAAAF,GAAA,GAAAA,GAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AAEP;;;AAEA,eAAKC,MAAL,GAAc,+CAAd;AACA,eAAKA,MAAL,CAAYC,kBAAZ,CAA+B,UAAAC,IAAI,EAAI;AACrC,gBAAIA,IAAJ,EAAU;AACR,mBAAI,CAACC,QAAL,GAAgBD,IAAhB;AACAE,0BAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAe,KAAI,CAACJ,QAApB,CAA7B;AACAG,kBAAI,CAACE,KAAL,CAAWJ,YAAY,CAACK,OAAb,CAAqB,MAArB,CAAX;AACD,aAJD,MAIO;AACLL,0BAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,IAA7B;AACAC,kBAAI,CAACE,KAAL,CAAWJ,YAAY,CAACK,OAAb,CAAqB,MAArB,CAAX;AACD;AACF,WATD;AAUD;;;;qCAGUC,I,EAAI;AACb,gBAAGC,MAAM,CAACD,IAAD,CAAT,EAAgB;AACd,kEAAoBE,GAApB,CAAwB,KAAKT,QAAL,CAAcU,GAAtC,EAA2CC,GAA3C,CAA+CJ,IAA/C;AACD;AACF;;;uCACe;;;;;;;AACVR,0B,GAAO,gDAAgBa,W;;AACV,6BAAM,oDAAoBH,GAApB,CAAwBV,IAAI,CAACW,GAA7B,EAAkCG,IAAlC,CAAuC,OAAvC,CAAN;;;AAAXC,8B;AACAP,0B,GAAOO,QAAQ,CAACC,GAAT,E;;2BACVP,MAAM,CAACD,IAAD,C;;;;;uDACAA,I;;;AAEPJ,0BAAI,CAACC,SAAL,CAAe;AAAC,kCAAUG;AAAX,uBAAf;;;;;;;;;AAEH,W,CAED;;;;iCACOS,K,EAAOC,Q,EAAU;AAAA;;AACtB,mBAAO,KAAKpB,MAAL,CAAYqB,0BAAZ,CAAuCF,KAAvC,EAA8CC,QAA9C,EACJE,IADI,CACC,UAACC,MAAD,EAAY;AAChBC,oBAAM,CAACC,KAAP,CAAa,QAAb;;AACA,oBAAI,CAAC1B,MAAL,CAAY2B,GAAZ,CAAgB,YAAM;AACpB,sBAAI,CAAC5B,MAAL,CAAY6B,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD,eAFD;;AAGA,oBAAI,CAACC,WAAL,CAAiBL,MAAM,CAACrB,IAAxB;AACD,aAPI,WAOI,UAAC2B,KAAD,EAAW;AAClBL,oBAAM,CAACC,KAAP,CAAaI,KAAK,CAACC,OAAnB;AACD,aATI,CAAP;AAUD,W,CAED;;;;iCACOX,K,EAAOC,Q,EAAU;AAAA;;AACtB,mBAAO,KAAKpB,MAAL,CAAY+B,8BAAZ,CAA2CZ,KAA3C,EAAkDC,QAAlD,EACJE,IADI,CACC,UAACC,MAAD,EAAY;AAChB;;AAEA,oBAAI,CAACS,oBAAL;;AACA,oBAAI,CAACJ,WAAL,CAAiBL,MAAM,CAACrB,IAAxB;AACD,aANI,WAMI,UAAC2B,KAAD,EAAW;AAClBL,oBAAM,CAACC,KAAP,CAAaI,KAAK,CAACC,OAAnB;AACD,aARI,CAAP;AASD,W,CAED;;;;iDACuB;AAAA;;AACrB,mBAAO,gDAAgBf,WAAhB,CAA4BkB,qBAA5B,GACNX,IADM,CACD,YAAM;AACV,oBAAI,CAACxB,MAAL,CAAY6B,QAAZ,CAAqB,CAAC,sBAAD,CAArB;AACD,aAHM,CAAP;AAID,W,CAED;;;;yCACeO,kB,EAAoB;AACjC,mBAAO,KAAKlC,MAAL,CAAYmC,sBAAZ,CAAmCD,kBAAnC,EACNZ,IADM,CACD,YAAM;AACVE,oBAAM,CAACC,KAAP,CAAa,8CAAb;AACD,aAHM,WAGE,UAACI,KAAD,EAAW;AAClBL,oBAAM,CAACC,KAAP,CAAaI,KAAb;AACD,aALM,CAAP;AAMD,W,CAED;;;;AAMA;uCACa;AACX,mBAAO,KAAKO,SAAL,CAAe,IAAI,8CAAcC,kBAAlB,EAAf,CAAP;AACD,W,CAED;;;;oCACUC,Q,EAAU;AAAA;;AAClB,mBAAO,KAAKtC,MAAL,CAAYuC,eAAZ,CAA4BD,QAA5B,EACNhB,IADM,CACD,UAACC,MAAD,EAAY;AACf,oBAAI,CAACxB,MAAL,CAAY2B,GAAZ,CAAgB,YAAM;AACnB,sBAAI,CAAC5B,MAAL,CAAY6B,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD,eAFF;;AAGD,oBAAI,CAACC,WAAL,CAAiBL,MAAM,CAACrB,IAAxB;AACD,aANM,WAME,UAAC2B,KAAD,EAAW;AAClBL,oBAAM,CAACC,KAAP,CAAaI,KAAb;AACD,aARM,CAAP;AASD;AAED;;;;;;sCAGY3B,I,EAAM;AAChB,gBAAMsC,OAAO,GAAkC,KAAK3C,GAAL,CAAS4C,GAAT,iBAAsBvC,IAAI,CAACW,GAA3B,EAA/C;AACA,gBAAMV,QAAQ,GAAS;AACrBU,iBAAG,EAAEX,IAAI,CAACW,GADW;AAErBM,mBAAK,EAAEjB,IAAI,CAACiB,KAFS;AAGrBuB,yBAAW,EAAExC,IAAI,CAACwC,WAHG;AAIrBC,sBAAQ,EAAEzC,IAAI,CAACyC,QAJM;AAKrBC,2BAAa,EAAE1C,IAAI,CAAC0C;AALC,aAAvB;AAOA,mBAAOJ,OAAO,CAAC1B,GAAR,CAAYX,QAAZ,EAAsB;AAC3B0C,mBAAK,EAAE;AADoB,aAAtB,CAAP;AAGD,W,CAED;;;;oCACU;AAAA;;AACR,mBAAO,KAAK7C,MAAL,CAAY8C,OAAZ,GAAsBxB,IAAtB,CAA2B,YAAM;AACtClB,0BAAY,CAAC2C,UAAb,CAAwB,MAAxB;;AACA,oBAAI,CAACjD,MAAL,CAAY6B,QAAZ,CAAqB,CAAC,SAAD,CAArB;AACD,aAHM,CAAP;AAID;;;8BA9Ca;AACZ,gBAAMzB,IAAI,GAAGI,IAAI,CAACE,KAAL,CAAWJ,YAAY,CAACK,OAAb,CAAqB,MAArB,CAAX,CAAb;AACA,mBAAQP,IAAI,KAAK,IAAT,IAAiBA,IAAI,CAAC0C,aAAL,KAAuB,KAAzC,GAAkD,IAAlD,GAAyD,KAAhE;AACD;;;;;;;yBAzFUhD,W,EAAW,gI,EAAA,8G,EAAA,4G;AAAA,O;;;eAAXA,W;AAAW,iBAAXA,WAAW,K;AAAA,oBAJV;;;;;wEAIDA,W,EAAW;gBALvB,wDAKuB;iBALZ;AACVoD,sBAAU,EAAE;AADF,W;AAKY,U;;;;;;;;;;;AAwIxB,eAASrC,MAAT,CAAgBsC,GAAhB,EAAqB;AACnB,YAAI;AACA3C,cAAI,CAACE,KAAL,CAAWyC,GAAX;AACH,SAFD,CAEE,OAAOC,CAAP,EAAU;AACR,iBAAO,KAAP;AACH;;AACD,eAAO,IAAP;AACD;;;;;;;;;;;;;;;;;AC3JD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACqCQ;;AACE;;AACE;;AACE;;AAEA;;AACE;;AAAI;;AAAO;;AAAQ;;AAAkD;;AAAS;;AAC9E;;AAAG;;AAAS;;AAAQ;;AAAY;;AAAS;;AACzC;;AAAG;;AAAO;;AAAQ;;AAAc;;AAAS;;AACzC;;AAAG;;AAAgB;;AAAQ;;AAAsB;;AAAS;;AAC5D;;AACF;;AACF;;AACF;;;;;;AAVsE;;AAAA;;AAC9D;;AAEmB;;AAAA;;AACC;;AAAA;;AACF;;AAAA;;AACS;;AAAA;;;;UDnC9BC,kB;AAEX,oCACSC,WADT,EAEStD,MAFT,EAGSC,MAHT,EAGuB;AAAA;;AAFd,eAAAqD,WAAA,GAAAA,WAAA;AACA,eAAAtD,MAAA,GAAAA,MAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACJ;;;;qCAEM,CACV;;;;;;;yBATUoD,kB,EAAkB,0I,EAAA,uH,EAAA,qH;AAAA,O;;;cAAlBA,kB;AAAkB,sC;AAAA,iB;AAAA,e;AAAA,6wB;AAAA;AAAA;ACV/B;;AACE;;AACE;;AAAI;;AAAsB;;AAC5B;;AACF;;AAGA;;AACE;;AAEE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAA2B;;AAC7B;;AACF;;AAEA;;AACE;;AAAoB;AAAA,qBAAS,IAAAC,WAAA,UAAT;AAA8B,aAA9B;;AAClB;;AAAmC;;AACrC;;AACF;;AACF;;AACF;;AACF;;AAGA;;AACE;;AAEE;;AACE;;AAAe;;AAAW;;AAC5B;;AAEA;;AAeA;;AAEF;;AACF;;AACF;;AACF;;;;AApByB;;AAAA;;;;;;;;;wED1BZD,kB,EAAkB;gBAL9B,uDAK8B;iBALpB;AACThF,oBAAQ,EAAE,eADD;AAETC,uBAAW,EAAE,4BAFJ;AAGTC,qBAAS,EAAE,CAAC,2BAAD;AAHF,W;AAKoB,U;;;;;;;;;;;;;;;;;;;;;;;;;;AEX/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOagF,Y,GALb;AAAA;;AAME,aAAAC,KAAA,GAAQ,gCAAR;AACD,O;;;yBAFYD,Y;AAAY,O;;;cAAZA,Y;AAAY,iC;AAAA,gB;AAAA,e;AAAA;AAAA;ACPzB;;;;;;;;;wEDOaA,Y,EAAY;gBALxB,uDAKwB;iBALd;AACTlF,oBAAQ,EAAE,UADD;AAETC,uBAAW,EAAE,sBAFJ;AAGTC,qBAAS,EAAE,CAAC,qBAAD;AAHF,W;AAKc,U;;;;;;;;;;;;;;;;;;AEPzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACYM;;AACE;;AAAuB;;AAAqC;;AAAQ;;AAAc;;AAAS;;AAAC;;AAC5F;;AAAuB;;AAA2E;;AACpG;;;;;;AAFsE;;AAAA;;;;UDL/DkF,oB;AAEX,sCACSH,WADT,EACiC;AAAA;;AAAxB,eAAAA,WAAA,GAAAA,WAAA;AACJ;;;;qCAEM,CACV;;;;;;;yBAPUG,oB,EAAoB,0I;AAAA,O;;;cAApBA,oB;AAAoB,yC;AAAA,iB;AAAA,e;AAAA,6gB;AAAA;AAAA;ACRjC;;AACE;;AAEE;;AACE;;AACE;;AACF;;AACF;;AAEA;;AACE;;AAAI;;AAAyB;;AAE7B;;AAMA;;AACE;;AAA6C;AAAA,qBAAS,IAAAH,WAAA,uBAAT;AAA2C,aAA3C;;AAC3C;;AACA;;AACF;;AACF;;AAEF;;AAEA;;AACE;;AAAM;;AAAW;;AAA8C;;AAAO;;AAAO;;AAC/E;;AAEF;;AACF;;;;AApB6B;;AAAA;;;;;;;;;wEDJhBG,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACTpF,oBAAQ,EAAE,kBADD;AAETC,uBAAW,EAAE,+BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKsB,U;;;;;;;;;;;;;;;;;;;;;;AEPjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA,UAAYmF,cAAZ;;AAAA,iBAAYA,cAAZ,EAA0B;AACxB;AACA;AACA;AACA;AACA;AACA;AACD,OAPD,EAAYA,cAAc,KAAdA,cAAc,MAA1B;;AASA,UAAYC,gBAAZ;;AAAA,iBAAYA,gBAAZ,EAA4B;AAC1B;AACA;AACA;AACD,OAJD,EAAYA,gBAAgB,KAAhBA,gBAAgB,MAA5B;;AAMA,UAAYC,YAAZ;;AAAA,iBAAYA,YAAZ,EAAwB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,OAXD,EAAYA,YAAY,KAAZA,YAAY,MAAxB;;AA2BA,UAAYC,gBAAZ;;AAAA,iBAAYA,gBAAZ,EAA4B;AAC1B;AACA;AACA;AACA;AACA;AACD,OAND,EAAYA,gBAAgB,KAAhBA,gBAAgB,MAA5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCvBaC,kB;AACX,oCACSR,WADT,EACiC;AAAA;;AAAxB,eAAAA,WAAA,GAAAA,WAAA;AACJ;;;;oCACKS,M,EAA4B3F,M,EAAwB;AAC5D,oBAAQ2F,MAAM,CAACC,IAAf;AACE,mBAAK,yDAAiBC,IAAtB;AACEF,sBAAM,CAACG,IAAP,GAAc,KAAKC,UAAL,CAAgB/F,MAAhB,EAAwB,CAAxB,CAAd;AACA;;AACF,mBAAK,yDAAiBgG,IAAtB;AACA,mBAAK,yDAAiBC,IAAtB;AACEN,sBAAM,CAACO,MAAP,GAAgBlG,MAAhB;AACA;AAPJ;AASD;;;qCAGkBA,M,EAAwBmG,E,EAAU;AACnD,gBAAMC,aAAa,GAAG,IAAIC,MAAJ,CAAW,oBAAX,CAAtB;AACA,mBAAOrG,MAAM,CAACsG,OAAP,CAAeF,aAAf,YAAiCD,EAAjC,OAAP;AACD,W,CAGD;;;;sCAEEI,M,EACAC,G,EAAW;AAEX,0DAAOC,KAAP,CAAaC,OAAb,CAAqBF,GAArB,EAA0B,UAASG,IAAT,EAAe;AACvCA,kBAAI,CAACC,KAAL,CAAW,GAAX;AACAL,oBAAM,CAACM,GAAP,CAAWF,IAAX;AACD,aAHD;AAID;;;0CAGCJ,M,EACAO,S,EACA9G,M,EACA+G,O,EAAgB;AAEhB,gBAAMC,IAAI,GAAG,IAAI,8CAAOC,IAAX,CAAgB;AAC3BC,kBAAI,EAAEH,OAAO,CAACI,CADa;AAE3BC,iBAAG,EAAEL,OAAO,CAACM,CAFc;AAG3BC,yBAAW,EAAER,SAHc;AAI3BZ,oBAAM,EAAElG,MAJmB;AAK3B8F,kBAAI,EAAE,KAAKC,UAAL,CAAgB,uDAAewB,KAA/B,EAAsC,CAAtC,CALqB;AAM3BC,mBAAK,EAAE,CANoB;AAO3BC,oBAAM,EAAE,CAPmB;AAQ3BC,wBAAU,EAAE,KARe;AAS3BC,8BAAgB,EAAE;AATS,aAAhB,CAAb;AAWAX,gBAAI,CAACY,EAAL,GAAU,iDAAV;AACArB,kBAAM,CAACM,GAAP,CAAWG,IAAX;AACA,mBAAOA,IAAP;AACD;;;qCAGCT,M,EACAsB,iB,EACA9H,c,EACAgH,O,EAAgB;AAEhB,gBAAM1G,IAAI,GAAG,IAAI,8CAAOyH,IAAX,aAAqBf,OAAO,CAACI,CAA7B,cAAkCJ,OAAO,CAACM,CAA1C,GAA+C;AAC1DC,yBAAW,EAAEO,iBAD6C;AAE1D3B,oBAAM,EAAEnG,cAFkD;AAG1D+F,kBAAI,EAAE,EAHoD;AAI1D4B,wBAAU,EAAE,KAJ8C;AAK1DC,8BAAgB,EAAE;AALwC,aAA/C,CAAb;AAOAtH,gBAAI,CAACuH,EAAL,GAAU,iDAAV;AACArB,kBAAM,CAACM,GAAP,CAAWxG,IAAX;AACA,mBAAOA,IAAP;AACD;;;qCAGCkG,M,EACAsB,iB,EACA9H,c,EACAgI,S,EACAhB,O,EAAgB;AAEhB,gBAAMiB,IAAI,GAAG,IAAI,8CAAOC,IAAX,CAAgB,CAAClB,OAAO,CAACI,CAAT,EAAYJ,OAAO,CAACM,CAApB,EAAuBN,OAAO,CAACI,CAA/B,EAAkCJ,OAAO,CAACM,CAA1C,CAAhB,EAA8D;AACzEC,yBAAW,EAAEO,iBAD4D;AAEzE3B,oBAAM,EAAEnG,cAFiE;AAGzE+F,kBAAI,EAAE,KAAKC,UAAL,CAAgB,uDAAewB,KAA/B,EAAsC,CAAtC,CAHmE;AAIzEW,6BAAe,EAAEH,SAJwD;AAKzEL,wBAAU,EAAE,KAL6D;AAMzEC,8BAAgB,EAAE,KANuD;AAOzEQ,uBAAS,EAAE;AAP8D,aAA9D,CAAb;AASAH,gBAAI,CAACJ,EAAL,GAAU,iDAAV;AACArB,kBAAM,CAACM,GAAP,CAAWmB,IAAX;AACA,mBAAOA,IAAP;AACD,W,CAED;;;;wCAGchB,I,EAAwBoB,O,EAAkBrB,O,EAAkB;AACxEC,gBAAI,CAACpE,GAAL,CAAS;AACP4E,mBAAK,EAAEa,IAAI,CAACC,GAAL,CAASF,OAAO,CAACjB,CAAR,GAAYJ,OAAO,CAACI,CAA7B,CADA;AAEPM,oBAAM,EAAEY,IAAI,CAACC,GAAL,CAASF,OAAO,CAACf,CAAR,GAAYN,OAAO,CAACM,CAA7B;AAFD,aAAT;AAIAL,gBAAI,CAACpE,GAAL,CAAS;AAAEsE,kBAAI,EAAEmB,IAAI,CAACE,GAAL,CAASxB,OAAO,CAACI,CAAjB,EAAoBiB,OAAO,CAACjB,CAA5B;AAAR,aAAT;AACAH,gBAAI,CAACpE,GAAL,CAAS;AAAEwE,iBAAG,EAAEiB,IAAI,CAACE,GAAL,CAASxB,OAAO,CAACM,CAAjB,EAAoBe,OAAO,CAACf,CAA5B;AAAP,aAAT;AACAL,gBAAI,CAACwB,SAAL;AACD;;;mCAEQnI,I,EAAwB0G,O,EAAkB;AACjD,gBAAM0B,OAAO,GAAG,CAAC,GAAD,EAAM1B,OAAO,CAACI,CAAd,EAAiBJ,OAAO,CAACM,CAAzB,CAAhB;AACAhH,gBAAI,CAACA,IAAL,CAAUqI,IAAV,CAAeD,OAAf;AACD;;;mCAEQT,I,EAAwBjB,O,EAAkB;AACjDiB,gBAAI,CAACpF,GAAL,CAAS;AAAE+F,gBAAE,EAAE5B,OAAO,CAACI,CAAd;AAAiByB,gBAAE,EAAE7B,OAAO,CAACM;AAA7B,aAAT;AACAW,gBAAI,CAACQ,SAAL;AACD,W,CAGD;;;;qCAEWjC,M,EAAuBlG,I,EAAsB;AACtDkG,kBAAM,CAACsC,MAAP,CAAcxI,IAAd;AACA,gBAAMyI,OAAO,GAAG,IAAI,8CAAOhB,IAAX,CAAgBzH,IAAI,CAACA,IAArB,EAA2B;AACzCiH,yBAAW,EAAEjH,IAAI,CAACiH,WADuB;AAEzCpB,oBAAM,EAAE7F,IAAI,CAAC6F,MAF4B;AAGzCJ,kBAAI,EAAE,EAHmC;AAIzC4B,wBAAU,EAAE,KAJ6B;AAKzCC,8BAAgB,EAAE;AALuB,aAA3B,CAAhB;AAOAmB,mBAAO,CAAClB,EAAR,GAAavH,IAAI,CAACuH,EAAlB;AACArB,kBAAM,CAACM,GAAP,CAAWiC,OAAX;AACA,mBAAOA,OAAP;AACD;;;+BAGIvC,M,EAAuB;AAC1B,iBAAKrB,WAAL,CAAiB6D,UAAjB,CAA4B3G,IAAI,CAACC,SAAL,CAAekE,MAAf,CAA5B;AACD;;;+BAEUA,M,EAAuB;;;;;;;;AACvB,6BAAM,KAAKrB,WAAL,CAAiB8D,UAAjB,EAAN;;;AAAPxG,0B;AACJ+D,4BAAM,CAAC0C,YAAP,CAAoBzG,IAApB;wDACOA,I;;;;;;;;;AACN;;;;;;;yBAhJUkD,kB,EAAkB,iI;AAAA,O;;;eAAlBA,kB;AAAkB,iBAAlBA,kBAAkB,K;AAAA,oBAFjB;;;;;wEAEDA,kB,EAAkB;gBAH9B,wDAG8B;iBAHnB;AACVZ,sBAAU,EAAE;AADF,W;AAGmB,U;;;;;;;;;;;;;;;;;;;;;;ACpB/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;;UAWaoE,e;AAEX,iCACShE,WADT,EAEStD,MAFT,EAEuB;AAAA;;AADd,eAAAsD,WAAA,GAAAA,WAAA;AACA,eAAAtD,MAAA,GAAAA,MAAA;AACJ;;;;qCAGM;AAAA;;AACT,4DAAgBG,kBAAhB,CAAmC,UAAAC,IAAI,EAAE;AACvC,kBAAGA,IAAH,EAAQ;AACN,sBAAI,CAACJ,MAAL,CAAY6B,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD;AACF,aAJD;AAKD;;;;;;;yBAdUyF,e,EAAe,0I,EAAA,uH;AAAA,O;;;cAAfA,e;AAAe,oC;AAAA,iB;AAAA,e;AAAA,yqB;AAAA;AAAA;;;ACX5B;;AACE;;AAEE;;AACE;;AAAI;;AAA4C;;AAAsB;;AAAI;;AAC5E;;AAEA;;AACE;;AAAI;;AAAO;;AACX;;AACE;;AACF;;AAEA;;AACE;;AACF;;AAGA;;AACE;;AAA2D;AAAA;;AAAA;;AAAA;;AAAA,qBAAS,IAAAhE,WAAA,6BAAT;AAA+D,aAA/D;;AAA3D;;AACF;;AAEA;;AACE;;AAAiB;;AAAsB;;AAAE;;AAAO;;AAClD;;AAGA;;AACE;;AAA4C;AAAA,qBAAS,IAAAA,WAAA,aAAT;AAAiC,aAAjC;;AAC1C;;AACA;;AACF;;AACF;;AAEA;;AACE;;AAAoC;;AAAgB;;AACtD;;AACF;;AAEA;;AACE;;AAAM;;AAAsB;;AAAoD;;AAAO;;AAAO;;AAChG;;AAEF;;AACF;;;;;;;;;wEDjCagE,e,EAAe;gBAN3B,uDAM2B;iBANjB;AACTjJ,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAMiB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEK5B,UAAMgJ,mBAAmB,GAAG,EAA5B;;UAGaC,mB;AA0DX,qCAAoBC,kBAApB,EAA4D;AAAA;;AAAxC,eAAAA,kBAAA,GAAAA,kBAAA;AAvDZ,eAAAC,aAAA,GAA8B,qDAAaC,MAA3C;AAqCR,eAAAC,eAAA,GAAkC,uDAAeC,KAAjD;AASA,eAAA5B,iBAAA,GAAsC,yDAAiB6B,IAAvD;AACQ,eAAAC,YAAA,GAAe,KAAf;AAQuD;;;;sCAEnDnD,G,EAAW;AACrB,iBAAK6C,kBAAL,CAAwBO,WAAxB,CACE,KAAKrD,MADP,EAEEC,GAFF;AAID;;;iCAEM;AACL,iBAAK6C,kBAAL,CAAwBQ,IAAxB,CAA6B,KAAKtD,MAAlC;AACD;;;iCAEY;;;;;;;;AACA,6BAAM,KAAK8C,kBAAL,CAAwBS,IAAxB,CAA6B,KAAKvD,MAAlC,CAAN;;;AAAP/D,0B;wDACGA,I;;;;;;;;;AACR;;;kDAEoB;AAAA;;AACnB,gBAAI,CAAC,KAAKuH,YAAV,EAAwB;AACtB;AACD;;AACD,mBAAO,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC5C,kBAAMC,GAAG,GAAG,IAAI1D,KAAJ,EAAZ;;AACA0D,iBAAG,CAACC,MAAJ,GAAa;AAAA,uBAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBC,+BADiB,GACT,IAAI,8CAAO5D,KAAX,CAAiB0D,GAAjB,CADS;AAEvB,+BAAK5D,MAAL,CAAY+D,QAAZ,CAAqBD,KAAK,CAAC7C,KAA3B;AACA,+BAAKjB,MAAL,CAAYgE,SAAZ,CAAsBF,KAAK,CAAC5C,MAA5B;AACA,+BAAKlB,MAAL,CAAYiE,kBAAZ,CAA+BH,KAA/B,EAAsCJ,OAAtC;;AAJuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAZ;AAAA,eAAb;;AAMAE,iBAAG,CAACM,OAAJ,GAAc,YAAM;AAClBP,sBAAM;AACP,eAFD;;AAGAC,iBAAG,CAACO,GAAJ,GAAU,MAAI,CAACX,YAAf;AACD,aAZM,CAAP;AAaD;;;oCAES/E,C,EAAU;AAClB,iBAAK2E,YAAL,GAAoB,IAApB;AACA,gBAAM5C,OAAO,GAAG,KAAKR,MAAL,CAAYoE,UAAZ,CAAuB3F,CAAvB,CAAhB;AACA,iBAAK4F,sBAAL,GAA8B;AAAEzD,eAAC,EAAEJ,OAAO,CAACI,CAAb;AAAgBE,eAAC,EAAEN,OAAO,CAACM;AAA3B,aAA9B;;AAEA,oBAAQ,KAAKiC,aAAb;AACE,mBAAK,qDAAauB,SAAlB;AACE,qBAAKC,oBAAL,GAA4B,KAAKzB,kBAAL,CAAwB0B,eAAxB,CAC1B,KAAKxE,MADqB,EAE1B,KAAKsB,iBAFqB,EAG1B,KAAK2B,eAHqB,EAI1BzC,OAJ0B,CAA5B;AAMA;;AACF,mBAAK,qDAAaiE,MAAlB;AACE,qBAAKF,oBAAL,GAA4B,KAAKzB,kBAAL,CAAwB4B,UAAxB,CAC1B,KAAK1E,MADqB,EAE1B,KAAKsB,iBAFqB,EAG1B,KAAK2B,eAHqB,EAI1BzC,OAJ0B,CAA5B;AAMA;;AACF,mBAAK,qDAAaf,IAAlB;AACE,qBAAK8E,oBAAL,GAA4B,KAAKzB,kBAAL,CAAwB6B,UAAxB,CAC1B,KAAK3E,MADqB,EAE1B,KAAKsB,iBAFqB,EAG1B,KAAK2B,eAHqB,EAI1B,CAAC,CAAD,EAAI,CAAJ,CAJ0B,EAK1BzC,OAL0B,CAA5B;AAOA;;AACF,mBAAK,qDAAaoE,WAAlB;AACE,qBAAKL,oBAAL,GAA4B,KAAKzB,kBAAL,CAAwB6B,UAAxB,CAC1B,KAAK3E,MADqB,EAE1B,KAAKsB,iBAFqB,EAG1B,KAAK2B,eAHqB,EAI1B,CAAC,CAAD,EAAI,CAAJ,CAJ0B,EAK1BzC,OAL0B,CAA5B;AAOA;AAlCJ;AAoCD;;;oCAES/B,C,EAAU;AAClB,gBAAI,CAAC,KAAK2E,YAAV,EAAwB;AACtB;AACD;;AACD,gBAAM5C,OAAO,GAAG,KAAKR,MAAL,CAAYoE,UAAZ,CAAuB3F,CAAvB,CAAhB;;AACA,oBAAQ,KAAKsE,aAAb;AACE,mBAAK,qDAAauB,SAAlB;AACE,qBAAKxB,kBAAL,CAAwB+B,aAAxB,CACE,KAAKN,oBADP,EAEE,KAAKF,sBAFP,EAGE7D,OAHF;AAKA;;AACF,mBAAK,qDAAaiE,MAAlB;AACE,qBAAK3B,kBAAL,CAAwBgC,QAAxB,CAAiC,KAAKP,oBAAtC,EAAgF/D,OAAhF;AACA;;AACF,mBAAK,qDAAaf,IAAlB;AACA,mBAAK,qDAAamF,WAAlB;AACE,qBAAK9B,kBAAL,CAAwBiC,QAAxB,CAAiC,KAAKR,oBAAtC,EAAgF/D,OAAhF;AACA;AAdJ;;AAgBA,iBAAKR,MAAL,CAAYgF,SAAZ;AACD;;;oCAES;AACR,iBAAK5B,YAAL,GAAoB,KAApB;;AACA,gBAAI,KAAKL,aAAL,KAAuB,qDAAa0B,MAAxC,EAAgD;AAC9C,mBAAKF,oBAAL,GAA4B,KAAKzB,kBAAL,CAAwBmC,UAAxB,CAAmC,KAAKjF,MAAxC,EAAgD,KACzEuE,oBADyB,CAA5B;AAED;;AACD,gBAAI,KAAKxB,aAAL,KAAuB,qDAAaC,MAAxC,EAAgD;AAC9C,mBAAKhD,MAAL,CAAYgF,SAAZ;AACD;AACF;;;iDAEmB;AAClB,0DAAO1L,MAAP,CAAc4L,SAAd,CAAwBC,QAAxB,GAAoC,UAAUA,QAAV,EAAoB;AACtD,qBAAO;AACL,uBAAO,8CAAOC,IAAP,CAAYhG,MAAZ,CAAmBiG,MAAnB,CAA0BF,QAAQ,CAACG,IAAT,CAAc,IAAd,CAA1B,EAA+C;AACpDjE,oBAAE,EAAE,KAAKA;AAD2C,iBAA/C,CAAP;AAGD,eAJD;AAKD,aANkC,CAMhC,8CAAO/H,MAAP,CAAc4L,SAAd,CAAwBC,QANQ,CAAnC;AAOD;;;yCAEc/F,M,EAA0B;AACvC,iBAAKmG,YAAL,GAAoBnG,MAAM,CAACuB,IAA3B;AACA,iBAAK6E,WAAL,GAAmBpG,MAAM,CAACyB,GAA1B;AACA,iBAAK4E,cAAL,GAAsBrG,MAAM,CAACsG,MAA7B;AACA,iBAAKC,cAAL,GAAsBvG,MAAM,CAACwG,MAA7B;;AACA,oBAAQ,KAAK7C,aAAb;AACE,mBAAK,qDAAa8C,MAAlB;AACE,qBAAK7F,MAAL,CAAYsC,MAAZ,CAAmBlD,MAAnB;AACA;;AACF,mBAAK,qDAAa0G,IAAlB;AACE,qBAAKhD,kBAAL,CAAwBiD,SAAxB,CAAkC3G,MAAlC,EAA0C,KAAK6D,eAA/C;AACA;AANJ;AAQD;;;uCAEY5B,E,EAAYhC,I,EAAwB2G,O,EAAiBC,M,EAAgB;AAChF,gBAAMC,KAAK,GAAGF,OAAO,GAAG,KAAKT,YAA7B;AACA,gBAAMY,KAAK,GAAGF,MAAM,GAAG,KAAKT,WAA5B;AACA,iBAAKD,YAAL,GAAoBS,OAApB;AACA,iBAAKR,WAAL,GAAmBS,MAAnB;AACD;;;wCAGC5E,E,EACAhC,I,EACA+G,S,EACAC,S,EAAwC;AAExC,gBAAMC,UAAU,GAAGF,SAAS,CAACxF,CAAV,GAAc,KAAK6E,cAAtC;AACA,gBAAMc,UAAU,GAAGH,SAAS,CAACtF,CAAV,GAAc,KAAK6E,cAAtC;AACA,iBAAKF,cAAL,GAAsBW,SAAS,CAACxF,CAAhC;AACA,iBAAK+E,cAAL,GAAsBS,SAAS,CAACtF,CAAhC;AACA,iBAAK0F,YAAL,CAAkBnF,EAAlB,EAAsBhC,IAAtB,EAA4BgH,SAAS,CAAC1F,IAAtC,EAA4C0F,SAAS,CAACxF,GAAtD;AACD;;;4CAEyB4F,Y,EAAuB;AAC/C,iBAAKzG,MAAL,CAAY0G,aAAZ,CAA0B,UAAAC,GAAG,EAAI;AAC/BA,iBAAG,CAACxF,UAAJ,GAAiBsF,YAAjB;AACD,aAFD;AAGD;;;4BAtNgBG,C,EAAiB;AAAA;;AAChC,iBAAK5G,MAAL,CAAY6G,mBAAZ;AACA,iBAAK7G,MAAL,CAAYgF,SAAZ;AACA,iBAAKjC,aAAL,GAAqB6D,CAArB;;AACA,gBACE,KAAK7D,aAAL,KAAuB,qDAAaC,MAApC,IACA,KAAKD,aAAL,KAAuB,qDAAa8C,MADpC,IAEA,KAAK9C,aAAL,KAAuB,qDAAa+C,IAHtC,EAIE;AACA,mBAAKgB,iBAAL,CAAuB,IAAvB;AACD,aAND,MAMO;AACL,mBAAKA,iBAAL,CAAuB,KAAvB;AACD;;AACD,gBAAI,KAAKC,YAAL,KAAsB,qDAAaC,OAAvC,EAAgD;AAC9C,kBAAMC,UAAU,GAAG,KAAKjH,MAAL,CAAYkH,eAA/B;AACA,mBAAKlH,MAAL,CAAYmH,KAAZ;AACA,mBAAKnH,MAAL,CAAYiE,kBAAZ,CAA+BgD,UAA/B,EAA2C,YAAM,CAAG,CAApD;AACD;;AACD,gBAAI,KAAKF,YAAL,KAAsB,qDAAaK,KAAvC,EAA8C;AAC5C,kBAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AACAD,oBAAM,CAACE,SAAP,GAAmB,UAACC,KAAD,EAAS;AAC1B,oBAAIvL,IAAI,GAAGuL,KAAK,CAACC,MAAN,CAAa3K,MAAxB;;AACA,sBAAI,CAACgG,kBAAL,CAAwBO,WAAxB,CACE,MAAI,CAACrD,MADP,EAEE/D,IAFF;AAID,eAND;AAOD;AACF,W;8BACe;AACd,mBAAO,KAAK8G,aAAZ;AACD;;;4BAEkB2E,C,EAAmB;AACpC,iBAAKzE,eAAL,GAAuByE,CAAvB;AACA,iBAAK1H,MAAL,CAAY6G,mBAAZ;AACA,iBAAK7G,MAAL,CAAYgF,SAAZ;AACD,W;8BACiB;AAChB,mBAAO,KAAK/B,eAAZ;AACD;;;;;;;yBAhDUJ,mB,EAAmB,yH;AAAA,O;;;eAAnBA,mB;AAAmB,iBAAnBA,mBAAmB;;;;;wEAAnBA,mB,EAAmB;gBAD/B;AAC+B,U;;;;;;;;;;;;;;;;;;;;;;ACnBhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,c,CAGA;AAGA;AAGA;AAQA;AAMA;;;UA8Ca8E,S;;;;;cAAAA,S;AAAS,oBAHR,2DAGQ;;;;2BAATA,S;AAAS,S;AAAA,mBAJT,CAAC,0EAAD,EAAa,iFAAb,EAAkC,wEAAlC,C;AAAqD,kBAbvD,CACP,uEADO,EAEP,mFAFO,EAGP,iEAAkBC,aAAlB,CAAgC,uEAAYnN,QAA5C,CAHO,EAIP,yEAJO,EAKP,+EALO,EAMP,kEANO,EAOP,0DAPO,EAQP,qEARO,EASP,6FATO,EAUP,4EAVO,EAWP,4EAXO,CAauD;;;;4HAIrDkN,S,EAAS;AAAA,yBA7BlB,2DA6BkB,EA5BlB,qFA4BkB,EA3BlB,qFA2BkB,EA1BlB,4FA0BkB,EAzBlB,6GAyBkB,EAxBlB,oGAwBkB,EAvBlB,sEAuBkB,EAtBlB,mGAsBkB,EArBlB,2FAqBkB,EApBlB,8GAoBkB,EAnBlB,oHAmBkB;AAnBM,oBAGxB,uEAHwB,EAIxB,mFAJwB,EAIR,gEAJQ,EAMxB,yEANwB,EAOxB,+EAPwB,EAQxB,kEARwB,EASxB,0DATwB,EAUxB,qEAVwB,EAWxB,6FAXwB,EAYxB,4EAZwB,EAaxB,4EAbwB;AAmBN,S;AANN,O;;;;;wEAMHA,S,EAAS;gBA/BrB,sDA+BqB;iBA/BZ;AACRE,wBAAY,EAAE,CACZ,2DADY,EAEZ,qFAFY,EAGZ,qFAHY,EAIZ,4FAJY,EAKZ,6GALY,EAMZ,oGANY,EAOZ,sEAPY,EAQZ,mGARY,EASZ,2FATY,EAUZ,8GAVY,EAWZ,oHAXY,CADN;AAcRxN,mBAAO,EAAE,CACP,uEADO,EAEP,mFAFO,EAGP,iEAAkBuN,aAAlB,CAAgC,uEAAYnN,QAA5C,CAHO,EAIP,yEAJO,EAKP,+EALO,EAMP,kEANO,EAOP,0DAPO,EAQP,qEARO,EASP,6FATO,EAUP,4EAVO,EAWP,4EAXO,CAdD;AA2BRqN,qBAAS,EAAE,CAAC,0EAAD,EAAa,iFAAb,EAAkC,wEAAlC,CA3BH;AA4BRC,qBAAS,EAAE,CAAC,2DAAD;AA5BH,W;AA+BY,U;;;;;;;;;;;;;;;;ACrEtB,eAASC,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,eAAOxE,OAAO,CAACC,OAAR,GAAkB7G,IAAlB,CAAuB,YAAW;AACxC,cAAI4B,CAAC,GAAG,IAAIyJ,KAAJ,CAAU,yBAAyBD,GAAzB,GAA+B,GAAzC,CAAR;AACAxJ,WAAC,CAAC0J,IAAF,GAAS,kBAAT;AACA,gBAAM1J,CAAN;AACA,SAJM,CAAP;AAKA;;AACDuJ,8BAAwB,CAACI,IAAzB,GAAgC,YAAW;AAAE,eAAO,EAAP;AAAY,OAAzD;;AACAJ,8BAAwB,CAACtE,OAAzB,GAAmCsE,wBAAnC;AACAK,YAAM,CAAC/N,OAAP,GAAiB0N,wBAAjB;AACAA,8BAAwB,CAAC3G,EAAzB,GAA8B,MAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASaiH,S;AAEX,2BACS3J,WADT,EAEStD,MAFT,EAEuB;AAAA;;AADd,eAAAsD,WAAA,GAAAA,WAAA;AACA,eAAAtD,MAAA,GAAAA,MAAA;AACL;;;;sCAGFkN,I,EACAC,K,EAA0B;AAC1B,gBAAG,KAAK7J,WAAL,CAAiB8J,UAAjB,KAAgC,IAAnC,EAAyC;AACvC,mBAAKpN,MAAL,CAAY6B,QAAZ,CAAqB,CAAC,SAAD,CAArB;AACD;;AACD,mBAAO,IAAP;AACD;;;;;;;yBAdUoL,S,EAAS,iI,EAAA,8G;AAAA,O;;;eAATA,S;AAAS,iBAATA,SAAS,K;AAAA,oBAHR;;;;;wEAGDA,S,EAAS;gBAJrB,wDAIqB;iBAJV;AACV/J,sBAAU,EAAE;AADF,W;AAIU,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCATmK,yB;AAIX,2CAAoBtP,aAApB,EAAwD;AAAA;;AAApC,eAAAA,aAAA,GAAAA,aAAA;AAHpB,eAAA6F,YAAA,GAAe,oDAAf;AACA,eAAA0J,QAAA,GAAW,KAAKvP,aAAL,CAAmB2N,YAA9B;AAE0D;;;;iCAE7C6B,I,EAAoB;;;;;;AAC/B,2BAAKxP,aAAL,CAAmB2N,YAAnB,GAAkC6B,IAAlC;AACA,2BAAKD,QAAL,GAAgB,KAAKvP,aAAL,CAAmB2N,YAAnC;;;;;;;;;AACD;;;mCACQ8B,K,EAAK;AAAA;;AACZ,gBAAIC,UAAU,GAAGD,KAAK,CAACE,UAAN,CAAiBC,KAAjB,CAAuB,CAAvB,CAAjB;AACA,gBAAI3B,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,kBAAM,CAAC4B,aAAP,CAAqBH,UAArB;;AACAzB,kBAAM,CAACxD,MAAP,GAAgB,UAAC2D,KAAD,EAAS;AACvB,qBAAI,CAACpO,aAAL,CAAmBiK,WAAnB,CACEgE,MAAM,CAACvK,MADT;AAGD,aAJD;AAMD;;;;;;;yBApBU4L,yB,EAAyB,2I;AAAA,O;;;cAAzBA,yB;AAAyB,8C;AAAA,iB;AAAA,gB;AAAA,0mC;AAAA;AAAA;ACTtC;;AACE;;AACE;;AAIE;AAAA,qBAAS,IAAAQ,MAAA,yBAAT;AAAoC,aAApC;;AAEA;;AACF;;AACA;;AAIE;AAAA,qBAAS,IAAAA,MAAA,yBAAT;AAAoC,aAApC;;AAEA;;AACF;;AACA;;AAIE;AAAA,qBAAS,IAAAA,MAAA,uBAAT;AAAkC,aAAlC;;AAEA;;AACF;;AACA;;AAIE;AAAA,qBAAS,IAAAA,MAAA,8BAAT;AAAyC,aAAzC;;AAEA;;AACF;;AACA;;AAIE;AAAA,qBAAS,IAAAA,MAAA,4BAAT;AAAuC,aAAvC;;AAEA;;AACF;;AACA;;AAIE;AAAA,qBAAS,IAAAA,MAAA,yBAAT;AAAoC,aAApC;;AAEA;;AACF;;AACA;;AAIE;AAAA,qBAAS,IAAAA,MAAA,0BAAT;AAAqC,aAArC;;AAEA;;AACF;;AACA;;AACE;;AAAkB;;AAA0B;;AAC5C;;AAAmB;AAAA,qBAAU,IAAAC,QAAA,QAAV;AAA0B,aAA1B;;AAAnB;;AACF;;AACF;;AACA;;AACA;;AACF;;;;AA5DM;;AAAA;;AAQA;;AAAA;;AAQA;;AAAA;;AAQA;;AAAA;;AAQA;;AAAA;;AAQA;;AAAA;;AAQA;;AAAA;;;;;;;;;wED5COT,yB,EAAyB;gBALrC,uDAKqC;iBAL3B;AACThP,oBAAQ,EAAE,uBADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAK2B,U;;;;;;;;;;;;;;;;;;;;;;AETtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASawP,wB;AAaX,0CAAoBC,YAApB,EAAuD;AAAA;;AAAnC,eAAAA,YAAA,GAAAA,YAAA;AAZpB,eAAArH,GAAA,GAAM,yDAAiBmB,IAAvB;AACA,eAAAmG,GAAA,GAAM,yDAAiBC,KAAvB;AACA,eAAAC,SAAA,GAAY,CAAZ;AACQ,eAAAC,CAAA,GAAI,KAAKJ,YAAL,CAAkB/H,iBAAtB;AASiD;;;;8BARhD;AACP,mBAAO,KAAKmI,CAAZ;AACD,W;4BACSd,Q,EAA4B;AACpC,iBAAKU,YAAL,CAAkB/H,iBAAlB,GAAsCqH,QAAtC;AACA,iBAAKc,CAAL,GAAS,KAAKJ,YAAL,CAAkB/H,iBAA3B;AACD;;;;;;;yBAXU8H,wB,EAAwB,2I;AAAA,O;;;cAAxBA,wB;AAAwB,6C;AAAA,gB;AAAA,e;AAAA,0M;AAAA;AAAA;ACTrC;;AACE;;AACA;;AAOE;AAAA;AAAA;;AACD;;AACH;;;;AARI;;AAAA,2FAAqB,UAArB,EAAqB,IAArB,EAAqB,KAArB,EAAqB,OAArB,EAAqB,KAArB,EAAqB,OAArB,EAAqB,WAArB,EAAqB,aAArB,EAAqB,aAArB,EAAqB,KAArB,EAAqB,SAArB,EAAqB,SAArB;;;;;;;;;wEDMSA,wB,EAAwB;gBALpC,uDAKoC;iBAL1B;AACT1P,oBAAQ,EAAE,sBADD;AAETC,uBAAW,EAAE,mCAFJ;AAGTC,qBAAS,EAAE,CAAC,mCAAD;AAHF,W;AAK0B,U;;;;;;;;;;;;;;;;;;;;;;AETrC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASa8P,uB;AAEX,yCACS/K,WADT,EACiC;AAAA;;AAAxB,eAAAA,WAAA,GAAAA,WAAA;AACJ;;;;qCAEM,CACV;;;;;;;yBAPU+K,uB,EAAuB,0I;AAAA,O;;;cAAvBA,uB;AAAuB,4C;AAAA,iB;AAAA,e;AAAA,6X;AAAA;AAAA;;;ACTpC;;AACE;;AACE;;AACE;;AAAI;;AAAc;;AAElB;;AAAuB;;AAA4D;;AAEnF;;AACE;;AACF;;AAGA;;AACE;;AAAmE;AAAA;;AAAA;;AAAA,qBAAS,IAAA/K,WAAA,0BAAT;AAA6D,aAA7D;;AAAnE;;AACF;;AACF;;AAEA;;AACE;;AAAM;;AAAa;;AAA6C;;AAAM;;AAAO;;AAC/E;;AAEF;;AACF;;;;;;;;;wEDba+K,uB,EAAuB;gBANnC,uDAMmC;iBANzB;AACThQ,oBAAQ,EAAE,qBADD;AAETC,uBAAW,EAAE,kCAFJ;AAGTC,qBAAS,EAAE,CAAC,iCAAD;AAHF,W;AAMyB,U;;;;;;;;;;;;;;;;;;;;;;AETpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;;UAWa+P,qB;AASX,uCAAoBN,YAApB,EAA+D/N,MAA/D,EAA+E;AAAA;;AAA3D,eAAA+N,YAAA,GAAAA,YAAA;AAA2C,eAAA/N,MAAA,GAAAA,MAAA;AAAkB;;;;+CAE5D;AAAA;;AACnB,iBAAKA,MAAL,CAAYsO,iBAAZ,CAA8B,YAAM;AAClC,kBAAI,OAAI,CAACP,YAAL,CAAkBrJ,MAAtB,EAA8B;AAC5B,uBAAI,CAACqJ,YAAL,CAAkBrJ,MAAlB,CAAyB6J,OAAzB;AACD;;AACD,qBAAI,CAAC7J,MAAL,GAAc,IAAI,8CAAO8J,MAAX,CAAkB,QAAlB,EAA4B;AACxClI,yBAAS,EAAE,KAD6B;AAExCmI,sCAAsB,EAAE;AAFgB,eAA5B,CAAd;AAIA,qBAAI,CAACV,YAAL,CAAkBrJ,MAAlB,GAA2B,OAAI,CAACA,MAAhC;;AACA,qBAAI,CAACqJ,YAAL,CAAkBW,oBAAlB;;AACA,4DAAO1Q,MAAP,CAAc4L,SAAd,CAAwB+E,aAAxB,GAAwC,KAAxC;;AACA,qBAAI,CAACC,iBAAL;;AACA,8DAAgB1O,kBAAhB,CAAmC,UAAAC,IAAI,EAAI;AACzC,oBAAIA,IAAJ,EAAU;AACR,yBAAI,CAAC4N,YAAL,CAAkB9F,IAAlB,GAAyB1G,IAAzB,CAA8B,YAAI;AAACsN,+BAAW,CAAC,YAAI;AAAC,6BAAI,CAACd,YAAL,CAAkB/F,IAAlB;AAAyB,qBAA/B,EAAgC,IAAhC,CAAX;AAAiD,mBAApF;AACD;AACF,eAJD;AAKD,aAjBD;AAkBD;;;4CAEiB;AAChB,iBAAK+F,YAAL,CAAkBe,qBAAlB;AACD;;;8CAE2B;AAAA;;AAC1B,iBAAKpK,MAAL,CAAYqK,EAAZ,CAAe,YAAf,EAA6B,UAAA5L,CAAC;AAAA,qBAAI,OAAI,CAACnD,MAAL,CAAY2B,GAAZ,CAAgB;AAAA,uBAAM,OAAI,CAACqN,iBAAL,CAAuB7L,CAAvB,CAAN;AAAA,eAAhB,CAAJ;AAAA,aAA9B;AACA,iBAAKuB,MAAL,CAAYqK,EAAZ,CAAe,YAAf,EAA6B,UAAA5L,CAAC;AAAA,qBAAI,OAAI,CAACnD,MAAL,CAAY2B,GAAZ,CAAgB;AAAA,uBAAM,OAAI,CAACsN,iBAAL,CAAuB9L,CAAvB,CAAN;AAAA,eAAhB,CAAJ;AAAA,aAA9B;AACA,iBAAKuB,MAAL,CAAYqK,EAAZ,CAAe,UAAf,EAA2B;AAAA,qBAAM,OAAI,CAAC/O,MAAL,CAAY2B,GAAZ,CAAgB;AAAA,uBAAM,OAAI,CAACuN,eAAL,EAAN;AAAA,eAAhB,CAAN;AAAA,aAA3B;AACA,iBAAKxK,MAAL,CAAYqK,EAAZ,CAAe,mBAAf,EAAoC,UAAA5L,CAAC;AAAA,qBAAI,OAAI,CAACnD,MAAL,CAAY2B,GAAZ,CAAgB;AAAA,uBAAM,OAAI,CAACwN,kBAAL,CAAwBhM,CAAxB,CAAN;AAAA,eAAhB,CAAJ;AAAA,aAArC;AACA,iBAAKuB,MAAL,CAAYqK,EAAZ,CAAe,mBAAf,EAAoC,UAAA5L,CAAC;AAAA,qBAAI,OAAI,CAACnD,MAAL,CAAY2B,GAAZ,CAAgB;AAAA,uBAAM,OAAI,CAACyN,kBAAL,CAAwBjM,CAAxB,CAAN;AAAA,eAAhB,CAAJ;AAAA,aAArC;AACA,iBAAKuB,MAAL,CAAYqK,EAAZ,CAAe,eAAf,EAAgC,UAAA5L,CAAC;AAAA,qBAAI,OAAI,CAACnD,MAAL,CAAY2B,GAAZ,CAAgB;AAAA,uBAAM,OAAI,CAAC0N,cAAL,CAAoBlM,CAApB,CAAN;AAAA,eAAhB,CAAJ;AAAA,aAAjC;AACA,iBAAKuB,MAAL,CAAYqK,EAAZ,CAAe,gBAAf,EAAiC,UAAA5L,CAAC;AAAA,qBAAI,OAAI,CAACnD,MAAL,CAAY2B,GAAZ,CAAgB;AAAA,uBAAM,OAAI,CAAC2N,eAAL,CAAqBnM,CAArB,CAAN;AAAA,eAAhB,CAAJ;AAAA,aAAlC;AACD;;;4CAEyB+I,K,EAAqB;AAC7C,iBAAK6B,YAAL,CAAkBwB,SAAlB,CAA4BrD,KAAK,CAAC/I,CAAlC;AACA,iBAAKqM,oCAAL,CAA0CtD,KAAK,CAAC/I,CAAhD;AACD;;;4CACyB+I,K,EAAqB;AAC7C,iBAAK6B,YAAL,CAAkB0B,SAAlB,CAA4BvD,KAAK,CAAC/I,CAAlC;AACD;;;4CACyB;AACxB,iBAAK4K,YAAL,CAAkB2B,OAAlB;AACD;;;6CAC0BvM,C,EAAmC;AAC5D,iBAAK4K,YAAL,CAAkB4B,cAAlB,CAAiCxM,CAAC,CAACgJ,MAAnC;AACD;;;6CAC0BhJ,C,EAAmC;AAC5D,iBAAK4K,YAAL,CAAkB4B,cAAlB,CAAiCxM,CAAC,CAACgJ,MAAnC;AACD;;;yCACsBhJ,C,EAAQ;AAC7B,iBAAK4K,YAAL,CAAkB7C,YAAlB,CAA+B/H,CAAC,CAACgJ,MAAF,CAASpG,EAAxC,EAA4C5C,CAAC,CAACgJ,MAAF,CAASpI,IAArD,EAA2DZ,CAAC,CAACgJ,MAAF,CAAS9G,IAApE,EAA0ElC,CAAC,CAACgJ,MAAF,CAAS5G,GAAnF;AACD;;;0CACuBpC,C,EAAQ;AAC9B,iBAAK4K,YAAL,CAAkB6B,aAAlB,CACEzM,CAAC,CAACgJ,MAAF,CAASpG,EADX,EAEE5C,CAAC,CAACgJ,MAAF,CAASpI,IAFX,EAGE;AAAEuB,eAAC,EAAEnC,CAAC,CAACgJ,MAAF,CAAS/B,MAAd;AAAsB5E,eAAC,EAAErC,CAAC,CAACgJ,MAAF,CAAS7B;AAAlC,aAHF,EAIE;AAAEjF,kBAAI,EAAElC,CAAC,CAACgJ,MAAF,CAAS9G,IAAjB;AAAuBE,iBAAG,EAAEpC,CAAC,CAACgJ,MAAF,CAAS5G;AAArC,aAJF;AAMD;;;+DAE4CpC,C,EAAU;AACrDA,aAAC,CAAC0M,eAAF;AACD;;;4BAzEyB1B,C,EAAW;AACnC,gBAAIA,CAAJ,EAAO;AACL,mBAAKJ,YAAL,CAAkB7F,YAAlB,GAAiCiG,CAAjC;AACD;AACF;;;;;;;yBAPUE,qB,EAAqB,2I,EAAA,qH;AAAA,O;;;cAArBA,qB;AAAqB,0C;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,yD;AAAA;AAAA;ACXlC;;AACE;;AACF;;;;;;;;wEDSaA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACTjQ,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD;AAHF,W;AAKuB,U;;;;;;;AAGnBsB,sBAAY;kBAAxB;AAAwB;;;;;;;;;;;;;;;;;;;AEd3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UASakQ,e;AAEX,iCACSzM,WADT,EACiC;AAAA;;AAAxB,eAAAA,WAAA,GAAAA,WAAA;AACJ;;;;qCAEM,CAAG;;;;;;;yBANHyM,e,EAAe,0I;AAAA,O;;;cAAfA,e;AAAe,oC;AAAA,iB;AAAA,e;AAAA,2mB;AAAA;AAAA;;;ACT5B;;AACE;;AAEE;;AACE;;AAAI;;AAA4C;;AAAsB;;AAAI;;AAC5E;;AAEA;;AACE;;AAAI;;AAAO;;AAEX;;AACE;;AACF;;AAEA;;AACE;;AACF;;AAEA;;AACE;;AAA4D;AAAA;;AAAA;;AAAA;;AAAA,qBAAS,IAAAzM,WAAA,6BAAT;AAA2D,aAA3D;;AAA5D;;AACF;;AAEA;;AACE;;AAAiB;;AAAsB;;AAAE;;AAAO;;AAClD;;AAGA;;AACE;;AAA4C;AAAA,qBAAS,IAAAA,WAAA,aAAT;AAAiC,aAAjC;;AAC1C;;AACA;;AACF;;AACF;;AAEF;;AAEA;;AACE;;AAAM;;AAAyB;;AAA6C;;AAAM;;AAAO;;AAC3F;;AACF;;AAEF;;;;;;;;;wEDhCayM,e,EAAe;gBAN3B,uDAM2B;iBANjB;AACT1R,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAMiB,U;;;;;;;;;;;;;;;;;;;;;;AET5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,UAAI,sEAAYY,UAAhB,EAA4B;AAC1B;AACD;;AAED,kFAAyB6Q,eAAzB,CAAyC,yDAAzC,WACS,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACnO,KAAR,CAAckO,GAAd,CAAJ;AAAA,OADZ","file":"main-es5.js","sourcesContent":["/* (ignored) */","/* (ignored) */","/* (ignored) */","import { Component } from '@angular/core';\nimport { EventHandlerService } from '../../event-handler.service';\nimport { DrawingColours } from '../../models';\n\n@Component({\n  selector: 'app-colour-palette',\n  templateUrl: './colour-palette.component.html',\n  styleUrls: ['./colour-palette.component.scss'],\n})\nexport class ColourPaletteComponent {\n  public colours = Object.values(DrawingColours);\n  public selectedColour: DrawingColours;\n\n  constructor(private fabricService: EventHandlerService) {\n    this.selectedColour = fabricService.selectedColour;\n  }\n\n  onSelect(colour: DrawingColours) {\n    this.fabricService.selectedColour = colour;\n    this.selectedColour = this.fabricService.selectedColour;\n  }\n}\n","<div class=\"d-flex container\">\n  <div *ngFor=\"let colour of colours;index as i;\"\n       [ngStyle]=\"{'background-color': colour}\"\n       [ngClass]=\"{'selected': colour === selectedColour}\"\n       class=\"colour-picker ml-1 mb-1\"\n       (click)=\"onSelect(colour)\"></div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SignInComponent } from '../../components/sign-in/sign-in.component';\nimport { SignUpComponent } from '../../components/sign-up/sign-up.component';\nimport { DashboardComponent } from '../../components/dashboard/dashboard.component';\nimport { ForgotPasswordComponent } from '../../components/forgot-password/forgot-password.component';\nimport { VerifyEmailComponent } from '../../components/verify-email/verify-email.component';\n\nimport { AuthGuard } from \"../../shared/guard/auth.guard\";\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/sign-in', pathMatch: 'full'},\n  { path: 'sign-in', component: SignInComponent},\n  { path: 'register-user', component: SignUpComponent},\n  { path: 'dashboard', component: DashboardComponent, canActivate: [AuthGuard] },\n  { path: 'forgot-password', component: ForgotPasswordComponent },\n  { path: 'verify-email-address', component: VerifyEmailComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\n\nexport class AppRoutingModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n  firebase: {\n    apiKey: \"AIzaSyCp99gYJkm02yOOHdcWPBdY86bD15cSxqw\",\n    authDomain: \"pencil-78cb2.firebaseapp.com\",\n    projectId: \"pencil-78cb2\",\n    storageBucket: \"pencil-78cb2.appspot.com\",\n    messagingSenderId: \"572002608489\",\n    appId: \"1:572002608489:web:3a75a982a5dc9a381bc9f8\",\n    measurementId: \"G-D321623C6N\"\n  }\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-paint',\n  templateUrl: './paint.component.html',\n  styleUrls: ['./paint.component.scss']\n})\nexport class PaintComponent {\n  imageDataURL = 'assets/background.jpeg'\n}\n","<div class=\"d-flex ml-0 mr-0\">\n  <div>\n    <app-fabric-canvas [imageDataURL]=\"imageDataURL\"></app-fabric-canvas>\n  </div>\n  <div class=\"width-200\">\n    <app-graphical-toolbar></app-graphical-toolbar>\n  </div>\n</div>\n","import { Injectable, NgZone } from '@angular/core';\nimport { User } from \"../services/user\";\nimport * as firebase  from 'firebase';\nimport { AngularFireAuth } from \"@angular/fire/auth\";\nimport { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\nimport { Router } from \"@angular/router\";\n\n@Injectable({\n  providedIn: 'root'\n})\n\n\nexport class AuthService {\n  userData: any; // Save logged in user data\n  afAuth: any;\n  constructor(\n    public afs: AngularFirestore, // Inject Firebase auth service\n    public router: Router,\n    public ngZone: NgZone // NgZone service to remove outside scope warning\n  ) {\n    /* Saving user data in localstorage when\n    logged in and setting up null when logged out */\n    this.afAuth = firebase.auth();\n    this.afAuth.onAuthStateChanged(user => {\n      if (user) {\n        this.userData = user;\n        localStorage.setItem('user', JSON.stringify(this.userData));\n        JSON.parse(localStorage.getItem('user'));\n      } else {\n        localStorage.setItem('user', null);\n        JSON.parse(localStorage.getItem('user'));\n      }\n    })\n  }\n\n\n  SaveCanvas(data){\n    if(isJson(data)){\n      firebase.database().ref(this.userData.uid).set(data);\n    }\n  }\n  async LoadCanvas(){\n    var user = firebase.auth().currentUser;\n    const snapshot = await firebase.database().ref(user.uid).once('value');\n    const data = snapshot.val();\n    if(isJson(data)){\n      return data;\n    }else{\n      JSON.stringify({'base64': data});\n    }\n  }\n\n  // Sign in with email/password\n  SignIn(email, password) {\n    return this.afAuth.signInWithEmailAndPassword(email, password)\n      .then((result) => {\n        window.alert(\"sucess\")\n        this.ngZone.run(() => {\n          this.router.navigate(['dashboard']);\n        });\n        this.SetUserData(result.user);\n      }).catch((error) => {\n        window.alert(error.message)\n      })\n  }\n\n  // Sign up with email/password\n  SignUp(email, password) {\n    return this.afAuth.createUserWithEmailAndPassword(email, password)\n      .then((result) => {\n        /* Call the SendVerificaitonMail() function when new user sign\n        up and returns promise */\n        this.SendVerificationMail();\n        this.SetUserData(result.user);\n      }).catch((error) => {\n        window.alert(error.message)\n      })\n  }\n\n  // Send email verfificaiton when new user sign up\n  SendVerificationMail() {\n    return firebase.auth().currentUser.sendEmailVerification()\n    .then(() => {\n      this.router.navigate(['verify-email-address']);\n    })\n  }\n\n  // Reset Forggot password\n  ForgotPassword(passwordResetEmail) {\n    return this.afAuth.sendPasswordResetEmail(passwordResetEmail)\n    .then(() => {\n      window.alert('Password reset email sent, check your inbox.');\n    }).catch((error) => {\n      window.alert(error)\n    })\n  }\n\n  // Returns true when user is looged in and email is verified\n  get isLoggedIn(): boolean {\n    const user = JSON.parse(localStorage.getItem('user'));\n    return (user !== null && user.emailVerified !== false) ? true : false;\n  }\n\n  // Sign in with Google\n  GoogleAuth() {\n    return this.AuthLogin(new firebase.auth.GoogleAuthProvider());\n  }\n\n  // Auth logic to run auth providers\n  AuthLogin(provider) {\n    return this.afAuth.signInWithPopup(provider)\n    .then((result) => {\n       this.ngZone.run(() => {\n          this.router.navigate(['dashboard']);\n        })\n      this.SetUserData(result.user);\n    }).catch((error) => {\n      window.alert(error)\n    })\n  }\n\n  /* Setting up user data when sign in with username/password,\n  sign up with username/password and sign in with social auth\n  provider in Firestore database using AngularFirestore + AngularFirestoreDocument service */\n  SetUserData(user) {\n    const userRef: AngularFirestoreDocument<any> = this.afs.doc(`users/${user.uid}`);\n    const userData: User = {\n      uid: user.uid,\n      email: user.email,\n      displayName: user.displayName,\n      photoURL: user.photoURL,\n      emailVerified: user.emailVerified\n    }\n    return userRef.set(userData, {\n      merge: true\n    })\n  }\n\n  // Sign out\n  SignOut() {\n    return this.afAuth.signOut().then(() => {\n      localStorage.removeItem('user');\n      this.router.navigate(['sign-in']);\n    })\n  }\n\n}\n\nfunction isJson(str) {\n  try {\n      JSON.parse(str);\n  } catch (e) {\n      return false;\n  }\n  return true;\n}\n","import { Component, OnInit, NgZone } from '@angular/core';\nimport { AuthService } from \"../../shared/services/auth.service\";\nimport { Router } from \"@angular/router\";\nimport { fabric } from \"fabric\";\n\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})\nexport class DashboardComponent implements OnInit {\n\n  constructor(\n    public authService: AuthService,\n    public router: Router,\n    public ngZone: NgZone\n  ) { }\n\n  ngOnInit() {\n  }\n\n}\n","<!-- Top navigation -->\n<nav class=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n  <a class=\"navbar-brand col-md-2 col-md-2 mr-0\" href=\"https://github.com/jk3vinl/pencil\">\n    <h4>Kevin's Pencil Project</h4>\n  </a>\n</nav>\n\n<!-- Sidebar navigation -->\n<div class=\"container-fluid\">\n  <div class=\"row\">\n\n    <nav class=\"col-md-2 d-md-block bg-light sidebar\">\n      <div class=\"sidebar-sticky\">\n        <ul class=\"nav flex-column\">\n          <li class=\"nav-item\">\n            <a class=\"nav-link active\">\n              <i class=\"fas fa-user\"></i>User Canvas\n            </a>\n          </li>\n          <!-- Calling SignOut() Api from AuthService -->\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" (click)=\"authService.SignOut()\">\n              <i class=\"fas fa-sign-out-alt\"></i>Log out\n            </a>\n          </li>\n        </ul>\n      </div>\n    </nav>\n\n    <!-- Main content -->\n    <main role=\"main\" class=\"col-md-9 ml-sm-auto col-lg-10 px-4\">\n      <div class=\"inner-adjust\">\n\n        <div class=\"pt-3 pb-2 mb-3 border-bottom\">\n          <h1 class=\"h2\">User Canvas</h1>\n        </div>\n        <!-- Show user data when logged in -->\n        <div class=\"row\" *ngIf=\"authService.userData as user\">\n          <div class=\"col-md-12\">\n            <div class=\"media\">\n              <img class=\"align-self-start mr-5 img-thumbnail rounded-circle\" src=\"{{(user.photoURL) ? user.photoURL : '/assets/dummy-user.png'}}\"\n                alt=\"{{user.displayName}}\">\n              <div class=\"media-body\">\n                <h1>Hello: <strong>{{(user.displayName) ? user.displayName : 'User'}}</strong></h1>\n                <p>User ID: <strong>{{user.uid}}</strong></p>\n                <p>Email: <strong>{{user.email}}</strong></p>\n                <p>Email Verified: <strong>{{user.emailVerified}}</strong></p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <app-paint></app-paint>\n\n      </div>\n    </main>\n  </div>\n</div>\n\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'angularfirebase-authentication';\n}\n","<router-outlet></router-outlet>","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from \"../../shared/services/auth.service\";\n\n@Component({\n  selector: 'app-verify-email',\n  templateUrl: './verify-email.component.html',\n  styleUrls: ['./verify-email.component.css']\n})\nexport class VerifyEmailComponent implements OnInit {\n\n  constructor(\n    public authService: AuthService\n  ) { }\n\n  ngOnInit() {\n  }\n\n}","<div class=\"displayTable\">\n  <div class=\"displayTableCell\">\n\n    <div class=\"px-logo\">\n      <a href=\"https://www.positronx.io\" target=\"_blank\">\n        <img src=\"https://www.positronx.io/wp-content/themes/positronx/img/logo-positronx-white.svg\" alt=\"positronX.io - Learn Full Stack Development\">\n      </a>\n    </div>\n\n    <div class=\"authBlock\">\n      <h3>Thank You for Registering</h3>\n\n      <div class=\"formGroup\" *ngIf=\"authService.userData as user\">\n        <p class=\"text-center\">We have sent a confirmation email to <strong>{{user.email}}</strong>.</p>\n        <p class=\"text-center\">Please check your email and click on the link to verfiy your email address.</p>\n      </div>\n\n      <!-- Calling SendVerificationMail() method using authService Api -->\n      <div class=\"formGroup\">\n        <button type=\"button\" class=\"btn btnPrimary\" (click)=\"authService.SendVerificationMail()\">\n          <i class=\"fas fa-redo-alt\"></i>\n          Resend Verification Email\n        </button>\n      </div>\n\n    </div>\n\n    <div class=\"redirectToLogin\">\n      <span>Go back to?<span class=\"redirect\" routerLink=\"/sign-in\"> Sign in</span></span>\n    </div>\n\n  </div>\n</div>\n","import { fabric } from 'fabric';\nexport enum DrawingColours {\n  BLACK = 'rgba(0,0,0,1)',\n  WHITE = 'rgba(255,255,255,1)',\n  RED = 'rgba(255,0,0,1)',\n  GREEN = 'rgba(0,255,0,1)',\n  BLUE = 'rgba(0,0,255,1)',\n  YELLOW = 'rgba(255,255,0,1)',\n}\n\nexport enum DrawingThickness {\n  THIN = 1,\n  MEDIUM = 3,\n  THICK = 5,\n}\n\nexport enum DrawingTools {\n  SELECT = 'SELECT',\n  ERASER = 'ERASER',\n  IMAGE = 'IMAGE',\n  RECTANGLE = 'RECTANGLE',\n  PENCIL = 'PENCIL',\n  LINE = 'LINE',\n  DASHED_LINE = 'DASHED_LINE',\n  FILL = 'FILL',\n  GARBAGE = 'GARBAGE',\n  SAVE = 'SAVE',\n}\n\nexport interface Pointer {\n  x: number;\n  y: number;\n}\n\ninterface CustomFabricProps {\n  id: string;\n}\nexport type CustomFabricObject = fabric.Object & CustomFabricProps;\nexport type CustomFabricRect = fabric.Rect & CustomFabricProps;\nexport type CustomFabricLine = fabric.Line & CustomFabricProps;\nexport type CustomFabricPath = fabric.Path & { id: string };\nexport type CustomFabricImage = fabric.Image & CustomFabricProps;\n\nexport enum FabricObjectType {\n  RECT = 'rect',\n  IMAGE = 'image',\n  LINE = 'line',\n  POLYGON = 'polygon',\n  PATH = 'path',\n}\n","import { fabric } from 'fabric';\nimport { AuthService } from \"../shared/services/auth.service\";\nimport {\n  CustomFabricLine,\n  CustomFabricObject,\n  CustomFabricPath,\n  CustomFabricRect,\n  CustomFabricImage,\n  DrawingColours,\n  DrawingThickness,\n  FabricObjectType,\n  Pointer,\n} from './models';\nimport { v4 as uuid } from 'uuid';\nimport { Injectable } from '@angular/core';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FabricShapeService {\n  constructor(\n    public authService: AuthService,\n  ) { }\n  fillShape(object: CustomFabricObject, colour: DrawingColours) {\n    switch (object.type) {\n      case FabricObjectType.RECT:\n        object.fill = this.setOpacity(colour, 0);\n        break;\n      case FabricObjectType.LINE:\n      case FabricObjectType.PATH:\n        object.stroke = colour;\n        break;\n    }\n  }\n\n\n  private setOpacity(colour: DrawingColours, to: number): string {\n    const opacityOfRGBA = new RegExp('(\\\\d\\\\.\\\\d|\\\\d)\\\\)');\n    return colour.replace(opacityOfRGBA, `${to})`);\n  }\n\n\n  // Creators\n  createImage(\n    canvas: fabric.Canvas,\n    url: string,\n  ): CustomFabricImage {\n    fabric.Image.fromURL(url, function(oImg) {\n      oImg.scale(0.5);\n      canvas.add(oImg);\n    }) as CustomFabricImage;\n  }\n\n  createRectangle(\n    canvas: fabric.Canvas,\n    thickness: DrawingThickness,\n    colour: DrawingColours,\n    pointer: Pointer,\n  ): CustomFabricRect {\n    const rect = new fabric.Rect({\n      left: pointer.x,\n      top: pointer.y,\n      strokeWidth: thickness,\n      stroke: colour,\n      fill: this.setOpacity(DrawingColours.WHITE, 0),\n      width: 0,\n      height: 0,\n      selectable: false,\n      hasRotatingPoint: false,\n    }) as CustomFabricRect;\n    rect.id = uuid();\n    canvas.add(rect);\n    return rect;\n  }\n\n  createPath(\n    canvas: fabric.Canvas,\n    selectedThickness: DrawingThickness,\n    selectedColour: DrawingColours,\n    pointer: Pointer,\n  ): CustomFabricPath {\n    const path = new fabric.Path(`M ${pointer.x} ${pointer.y}`, {\n      strokeWidth: selectedThickness,\n      stroke: selectedColour,\n      fill: '',\n      selectable: false,\n      hasRotatingPoint: false,\n    }) as CustomFabricPath;\n    path.id = uuid();\n    canvas.add(path);\n    return path;\n  }\n\n  createLine(\n    canvas: fabric.Canvas,\n    selectedThickness: DrawingThickness,\n    selectedColour: DrawingColours,\n    dashArray: number[],\n    pointer: Pointer,\n  ): CustomFabricLine {\n    const line = new fabric.Line([pointer.x, pointer.y, pointer.x, pointer.y], {\n      strokeWidth: selectedThickness,\n      stroke: selectedColour,\n      fill: this.setOpacity(DrawingColours.WHITE, 0),\n      strokeDashArray: dashArray,\n      selectable: false,\n      hasRotatingPoint: false,\n      selection: false,\n    }) as CustomFabricLine;\n    line.id = uuid();\n    canvas.add(line);\n    return line;\n  }\n\n  // Formers\n\n\n  formRectangle(rect: CustomFabricRect, initPos: Pointer, pointer: Pointer) {\n    rect.set({\n      width: Math.abs(initPos.x - pointer.x),\n      height: Math.abs(initPos.y - pointer.y),\n    });\n    rect.set({ left: Math.min(pointer.x, initPos.x) });\n    rect.set({ top: Math.min(pointer.y, initPos.y) });\n    rect.setCoords();\n  }\n\n  formPath(path: CustomFabricPath, pointer: Pointer) {\n    const newLine = ['L', pointer.x, pointer.y];\n    path.path.push(newLine as any);\n  }\n\n  formLine(line: CustomFabricLine, pointer: Pointer) {\n    line.set({ x2: pointer.x, y2: pointer.y });\n    line.setCoords();\n  }\n\n\n  // Finishers\n\n  finishPath(canvas: fabric.Canvas, path: CustomFabricPath): CustomFabricPath {\n    canvas.remove(path);\n    const newPath = new fabric.Path(path.path, {\n      strokeWidth: path.strokeWidth,\n      stroke: path.stroke,\n      fill: '',\n      selectable: false,\n      hasRotatingPoint: false,\n    }) as CustomFabricPath;\n    newPath.id = path.id;\n    canvas.add(newPath);\n    return newPath;\n  }\n\n\n  save(canvas: fabric.Canvas) {\n    this.authService.SaveCanvas(JSON.stringify(canvas));\n  }\n\n  async load(canvas: fabric.Canvas) {\n  let data = await this.authService.LoadCanvas();\n  canvas.loadFromJSON(data);\n  return data;\n  }\n}\n","import { Router } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { AuthService } from \"../../shared/services/auth.service\";\nimport * as firebase from 'firebase'\n\n@Component({\n  selector: 'app-sign-in',\n  templateUrl: './sign-in.component.html',\n  styleUrls: ['./sign-in.component.css']\n})\n\nexport class SignInComponent implements OnInit {\n\n  constructor(\n    public authService: AuthService,\n    public router: Router\n  ) { }\n\n\n  ngOnInit() {\n    firebase.auth().onAuthStateChanged(user=>{\n      if(user){\n        this.router.navigate(['dashboard']);\n      }\n    })\n  }\n\n}\n","<div class=\"displayTable\">\n  <div class=\"displayTableCell\">\n\n    <div class=\"logo\">\n      <h3><a href=\"https://github.com/jk3vinl/pencil\">Kevin's Pencil Project</a></h3>\n    </div>\n\n    <div class=\"authBlock\">\n      <h3>Sign In</h3>\n      <div class=\"formGroup\">\n        <input type=\"text\" class=\"formControl\" placeholder=\"Username\" #userName required>\n      </div>\n\n      <div class=\"formGroup\">\n        <input type=\"password\" class=\"formControl\" placeholder=\"Password\" #userPassword required>\n      </div>\n\n      <!-- Calling SignIn Api from AuthService -->\n      <div class=\"formGroup\">\n        <input type=\"button\" class=\"btn btnPrimary\" value=\"Log in\" (click)=\"authService.SignIn(userName.value, userPassword.value)\">\n      </div>\n\n      <div class=\"formGroup\">\n        <span class=\"or\"><span class=\"orInner\">Or</span></span>\n      </div>\n\n      <!-- Calling GoogleAuth Api from AuthService -->\n      <div class=\"formGroup\">\n        <button type=\"button\" class=\"btn googleBtn\" (click)=\"authService.GoogleAuth()\">\n          <i class=\"fab fa-google-plus-g\"></i>\n          Log in with Google\n        </button>\n      </div>\n\n      <div class=\"forgotPassword\">\n        <span routerLink=\"/forgot-password\">Forgot Password?</span>\n      </div>\n    </div>\n\n    <div class=\"redirectToLogin\">\n      <span>Don't have an account?<span class=\"redirect\" routerLink=\"/register-user\"> Sign Up</span></span>\n    </div>\n\n  </div>\n</div>\n","import { fabric } from 'fabric';\nimport { FabricShapeService } from './shape.service';\nimport {\n  CustomFabricLine,\n  CustomFabricObject,\n  CustomFabricPath,\n  CustomFabricRect,\n  CustomFabricImage,\n  DrawingColours,\n  DrawingThickness,\n  DrawingTools,\n  FabricObjectType,\n  Pointer,\n} from './models';\nimport { Injectable } from '@angular/core';\n\nconst RANGE_AROUND_CENTER = 20;\n\n@Injectable()\nexport class EventHandlerService {\n  public imageDataUrl: string;\n  public canvas: fabric.Canvas;\n  private _selectedTool: DrawingTools = DrawingTools.SELECT;\n  private previousTop: number;\n  private previousLeft: number;\n  private previousScaleX: number;\n  private previousScaleY: number;\n  set selectedTool(t: DrawingTools) {\n    this.canvas.discardActiveObject();\n    this.canvas.renderAll();\n    this._selectedTool = t;\n    if (\n      this._selectedTool === DrawingTools.SELECT ||\n      this._selectedTool === DrawingTools.ERASER ||\n      this._selectedTool === DrawingTools.FILL\n    ) {\n      this.objectsSelectable(true);\n    } else {\n      this.objectsSelectable(false);\n    }\n    if (this.selectedTool === DrawingTools.GARBAGE) {\n      const background = this.canvas.backgroundImage;\n      this.canvas.clear();\n      this.canvas.setBackgroundImage(background, () => { });\n    }\n    if (this.selectedTool === DrawingTools.IMAGE) {\n      var reader = new FileReader();\n      reader.onloadend = (event)=>{\n        var data = event.target.result;\n        this.fabricShapeService.createImage(\n          this.canvas,\n          data as string,\n        );\n      }\n    }\n  }\n  get selectedTool(): DrawingTools {\n    return this._selectedTool;\n  }\n  _selectedColour: DrawingColours = DrawingColours.BLACK;\n  set selectedColour(c: DrawingColours) {\n    this._selectedColour = c;\n    this.canvas.discardActiveObject();\n    this.canvas.renderAll();\n  }\n  get selectedColour(): DrawingColours {\n    return this._selectedColour;\n  }\n  selectedThickness: DrawingThickness = DrawingThickness.THIN;\n  private _isMouseDown = false;\n  private _elementUnderDrawing:\n    | CustomFabricRect\n    | CustomFabricPath\n    | CustomFabricLine\n    | CustomFabricImage;\n  private _initPositionOfElement: Pointer;\n\n  constructor(private fabricShapeService: FabricShapeService) { }\n\n  createImage(url: string){\n    this.fabricShapeService.createImage(\n      this.canvas,\n      url,\n    )\n  }\n\n  save() {\n    this.fabricShapeService.save(this.canvas);\n  }\n\n  async load() {\n    let data = await this.fabricShapeService.load(this.canvas);\n    return data;\n  }\n\n  addBGImageSrcToCanvas(): Promise<void> {\n    if (!this.imageDataUrl) {\n      return;\n    }\n    return new Promise<void>((resolve, reject) => {\n      const img = new Image();\n      img.onload = async () => {\n        const f_img = new fabric.Image(img);\n        this.canvas.setWidth(f_img.width);\n        this.canvas.setHeight(f_img.height);\n        this.canvas.setBackgroundImage(f_img, resolve);\n      };\n      img.onerror = () => {\n        reject();\n      };\n      img.src = this.imageDataUrl;\n    });\n  }\n\n  mouseDown(e: Event) {\n    this._isMouseDown = true;\n    const pointer = this.canvas.getPointer(e);\n    this._initPositionOfElement = { x: pointer.x, y: pointer.y };\n\n    switch (this._selectedTool) {\n      case DrawingTools.RECTANGLE:\n        this._elementUnderDrawing = this.fabricShapeService.createRectangle(\n          this.canvas,\n          this.selectedThickness,\n          this._selectedColour,\n          pointer,\n        );\n        break;\n      case DrawingTools.PENCIL:\n        this._elementUnderDrawing = this.fabricShapeService.createPath(\n          this.canvas,\n          this.selectedThickness,\n          this._selectedColour,\n          pointer,\n        );\n        break;\n      case DrawingTools.LINE:\n        this._elementUnderDrawing = this.fabricShapeService.createLine(\n          this.canvas,\n          this.selectedThickness,\n          this._selectedColour,\n          [5, 0],\n          pointer,\n        );\n        break;\n      case DrawingTools.DASHED_LINE:\n        this._elementUnderDrawing = this.fabricShapeService.createLine(\n          this.canvas,\n          this.selectedThickness,\n          this._selectedColour,\n          [5, 5],\n          pointer,\n        );\n        break;\n    }\n  }\n\n  mouseMove(e: Event) {\n    if (!this._isMouseDown) {\n      return;\n    }\n    const pointer = this.canvas.getPointer(e);\n    switch (this._selectedTool) {\n      case DrawingTools.RECTANGLE:\n        this.fabricShapeService.formRectangle(\n          this._elementUnderDrawing as CustomFabricRect,\n          this._initPositionOfElement,\n          pointer,\n        );\n        break;\n      case DrawingTools.PENCIL:\n        this.fabricShapeService.formPath(this._elementUnderDrawing as CustomFabricPath, pointer);\n        break;\n      case DrawingTools.LINE:\n      case DrawingTools.DASHED_LINE:\n        this.fabricShapeService.formLine(this._elementUnderDrawing as CustomFabricLine, pointer);\n        break;\n    }\n    this.canvas.renderAll();\n  }\n\n  mouseUp() {\n    this._isMouseDown = false;\n    if (this._selectedTool === DrawingTools.PENCIL) {\n      this._elementUnderDrawing = this.fabricShapeService.finishPath(this.canvas, this\n        ._elementUnderDrawing as CustomFabricPath);\n    }\n    if (this._selectedTool !== DrawingTools.SELECT) {\n      this.canvas.renderAll();\n    }\n  }\n\n  extendToObjectWithId(): void {\n    fabric.Object.prototype.toObject = (function (toObject) {\n      return function (this: CustomFabricObject) {\n        return fabric.util.object.extend(toObject.call(this), {\n          id: this.id,\n        });\n      };\n    })(fabric.Object.prototype.toObject);\n  }\n\n  objectSelected(object: CustomFabricObject): void {\n    this.previousLeft = object.left;\n    this.previousTop = object.top;\n    this.previousScaleX = object.scaleX;\n    this.previousScaleY = object.scaleY;\n    switch (this._selectedTool) {\n      case DrawingTools.ERASER:\n        this.canvas.remove(object);\n        break;\n      case DrawingTools.FILL:\n        this.fabricShapeService.fillShape(object, this._selectedColour);\n        break;\n    }\n  }\n\n  objectMoving(id: string, type: FabricObjectType, newLeft: number, newTop: number) {\n    const diffX = newLeft - this.previousLeft;\n    const diffY = newTop - this.previousTop;\n    this.previousLeft = newLeft;\n    this.previousTop = newTop;\n  }\n\n  objectScaling(\n    id: string,\n    type: FabricObjectType,\n    newScales: { x: number; y: number },\n    newCoords: { left: number; top: number },\n  ) {\n    const scaleDiffX = newScales.x - this.previousScaleX;\n    const scaleDiffY = newScales.y - this.previousScaleY;\n    this.previousScaleX = newScales.x;\n    this.previousScaleY = newScales.y;\n    this.objectMoving(id, type, newCoords.left, newCoords.top);\n  }\n\n  private objectsSelectable(isSelectable: boolean) {\n    this.canvas.forEachObject(obj => {\n      obj.selectable = isSelectable;\n    });\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\n// Reactive Form\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\n// App routing modules\nimport { AppRoutingModule } from './shared/routing/app-routing.module';\n\n// App components\nimport { AppComponent } from './app.component';\nimport { SignInComponent } from './components/sign-in/sign-in.component';\nimport { SignUpComponent } from './components/sign-up/sign-up.component';\nimport { DashboardComponent } from './components/dashboard/dashboard.component';\nimport { ForgotPasswordComponent } from './components/forgot-password/forgot-password.component';\nimport { VerifyEmailComponent } from './components/verify-email/verify-email.component';\n\n// Firebase services + enviorment module\nimport { AngularFireModule } from \"@angular/fire\";\nimport { AngularFireAuthModule } from \"@angular/fire/auth\";\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\nimport { environment } from '../environments/environment';\n\n// Auth service\nimport { AuthService } from \"./shared/services/auth.service\";\n\nimport {MatIconModule} from '@angular/material/icon';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { PaintComponent } from './paint/paint.component';\nimport { FabricCanvasComponent } from './paint/fabric-canvas/fabric-canvas.component';\nimport { GraphicalToolbarComponent } from './paint/toolbar/toolbar.component';\nimport { ColourPaletteComponent } from './paint/toolbar/colour-palette/colour-palette.component';\nimport { ThicknessSliderComponent } from './paint/toolbar/thickness-slider/thickness-slider.component';\nimport { InputsModule,SliderModule } from '@progress/kendo-angular-inputs';\nimport { EventHandlerService } from './paint/event-handler.service';\nimport { FabricShapeService } from './paint/shape.service';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    SignInComponent,\n    SignUpComponent,\n    DashboardComponent,\n    ForgotPasswordComponent,\n    VerifyEmailComponent,\n    PaintComponent,\n    FabricCanvasComponent,\n    GraphicalToolbarComponent,\n    ColourPaletteComponent,\n    ThicknessSliderComponent,\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    AngularFireModule.initializeApp(environment.firebase),\n    AngularFireAuthModule,\n    AngularFirestoreModule,\n    ReactiveFormsModule,\n    FormsModule,\n    MatIconModule,\n    BrowserAnimationsModule,\n    InputsModule,\n    SliderModule,\n  ],\n  providers: [AuthService,EventHandlerService, FabricShapeService],\n  bootstrap: [AppComponent]\n})\n\nexport class AppModule { }\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"crnd\";","import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router } from '@angular/router';\nimport { AuthService } from \"../../shared/services/auth.service\";\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class AuthGuard implements CanActivate {\n  \n  constructor(\n    public authService: AuthService,\n    public router: Router\n  ){ }\n\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n    if(this.authService.isLoggedIn !== true) {\n      this.router.navigate(['sign-in'])\n    }\n    return true;\n  }\n\n}","import { Component } from '@angular/core';\nimport { EventHandlerService } from '../event-handler.service';\nimport { DrawingTools } from '../models';\n\n@Component({\n  selector: 'app-graphical-toolbar',\n  templateUrl: './toolbar.component.html',\n  styleUrls: ['./toolbar.component.scss'],\n})\nexport class GraphicalToolbarComponent {\n  DrawingTools = DrawingTools;\n  selected = this.fabricService.selectedTool;\n\n  constructor(private fabricService: EventHandlerService) {}\n\n  async select(tool: DrawingTools) {\n    this.fabricService.selectedTool = tool;\n    this.selected = this.fabricService.selectedTool;\n  }\n  readFile(input){\n    let inputImage = input.srcElement.files[0];\n    var reader = new FileReader();\n    reader.readAsDataURL(inputImage);\n    reader.onload = (event)=>{\n      this.fabricService.createImage(\n        reader.result as string,\n      );\n    }\n\n  }\n}\n\n","<div>\n  <div class=\"d-flex flex-wrap mb-5\">\n    <div\n      title=\"Select and move\"\n      class=\"toolbox-item ml-1 mt-1\"\n      [ngClass]=\"{ selected: selected === 'SELECT' }\"\n      (click)=\"select(DrawingTools.SELECT)\"\n    >\n      <img src=\"assets/toolbar-images/select.png\" />\n    </div>\n    <div\n      title=\"Eraser\"\n      class=\"toolbox-item ml-1 mt-1\"\n      [ngClass]=\"{ selected: selected === 'ERASER' }\"\n      (click)=\"select(DrawingTools.ERASER)\"\n    >\n      <img src=\"assets/toolbar-images/eraser.png\" />\n    </div>\n    <div\n      title=\"Straight Line\"\n      class=\"toolbox-item ml-1 mt-1\"\n      [ngClass]=\"{ selected: selected === 'LINE' }\"\n      (click)=\"select(DrawingTools.LINE)\"\n    >\n      <img src=\"assets/toolbar-images/line.png\" />\n    </div>\n    <div\n      title=\"Dashed line\"\n      class=\"toolbox-item ml-1 mt-1\"\n      [ngClass]=\"{ selected: selected === 'DASHED_LINE' }\"\n      (click)=\"select(DrawingTools.DASHED_LINE)\"\n    >\n      <img src=\"assets/toolbar-images/dashed-line.png\" />\n    </div>\n    <div\n      title=\"Rectangle\"\n      class=\"toolbox-item ml-1 mt-1\"\n      [ngClass]=\"{ selected: selected === 'RECTANGLE' }\"\n      (click)=\"select(DrawingTools.RECTANGLE)\"\n    >\n      <img src=\"assets/toolbar-images/rectangle.png\" />\n    </div>\n    <div\n      title=\"Free hand draw\"\n      class=\"toolbox-item ml-1 mt-1\"\n      [ngClass]=\"{ selected: selected === 'PENCIL' }\"\n      (click)=\"select(DrawingTools.PENCIL)\"\n    >\n      <img src=\"assets/toolbar-images/pencil.png\" />\n    </div>\n    <div\n      title=\"Clear canvas\"\n      class=\"toolbox-item ml-1 mt-1\"\n      [ngClass]=\"{ selected: selected === 'GARBAGE' }\"\n      (click)=\"select(DrawingTools.GARBAGE)\"\n    >\n      <img src=\"assets/toolbar-images/garbage.png\" />\n    </div>\n    <div style = \"padding-top: 15px ; padding-left: 5px;\">\n      <label for=\"file\">Insert image from desktop:</label>\n      <input type=\"file\" (change)=\"readFile($event)\" accept=\"image/x-png,image/gif,image/jpeg\" style=\"float: left\">\n    </div>\n  </div>\n  <app-colour-palette></app-colour-palette>\n  <app-thickness-slider></app-thickness-slider>\n</div>\n","import { AfterViewInit, Component, OnDestroy } from '@angular/core';\nimport { timer } from 'rxjs';\nimport { EventHandlerService } from '../../event-handler.service';\nimport { DrawingThickness } from '../../models';\n@Component({\n  selector: 'app-thickness-slider',\n  templateUrl: './thickness-slider.component.html',\n  styleUrls: ['./thickness-slider.component.scss'],\n})\nexport class ThicknessSliderComponent {\n  min = DrawingThickness.THIN;\n  max = DrawingThickness.THICK;\n  smallStep = 2;\n  private v = this.eventHandler.selectedThickness;\n  get value(): DrawingThickness {\n    return this.v;\n  }\n  set value(selected: DrawingThickness) {\n    this.eventHandler.selectedThickness = selected;\n    this.v = this.eventHandler.selectedThickness;\n  }\n\n  constructor(private eventHandler: EventHandlerService) {}\n}\n","<div class=\"mt-4 ml-1 d-flex row\" style=\"padding-left: 5px;\">\n  <div class=\"triangle\"></div>\n  <kendo-slider\n    [fixedTickWidth]=\"15\"\n    [vertical]=\"true\"\n    [min]=\"min\"\n    [max]=\"max\"\n    [smallStep]=\"smallStep\"\n    [showButtons]=\"false\"\n    [(ngModel)]=\"value\"\n  ></kendo-slider>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from \"../../shared/services/auth.service\";\n\n@Component({\n  selector: 'app-forgot-password',\n  templateUrl: './forgot-password.component.html',\n  styleUrls: ['./forgot-password.component.css']\n})\n\nexport class ForgotPasswordComponent implements OnInit {\n\n  constructor(\n    public authService: AuthService\n  ) { }\n\n  ngOnInit() {\n  }\n\n}","<div class=\"displayTable\">\n  <div class=\"displayTableCell\">\n    <div class=\"authBlock\">\n      <h3>Reset Password</h3>\n\n      <p class=\"text-center\">Please enter your email address to request a password reset.</p>\n\n      <div class=\"formGroup\">\n        <input type=\"email\" class=\"formControl\" placeholder=\"Email Address\" #passwordResetEmail required>\n      </div>\n\n      <!-- Calling ForgotPassword from AuthService Api -->\n      <div class=\"formGroup\">\n        <input type=\"submit\" class=\"btn btnPrimary\" value=\"Reset Password\" (click)=\"authService.ForgotPassword(passwordResetEmail.value)\">\n      </div>\n    </div>\n\n    <div class=\"redirectToLogin\">\n      <span>Go back to ? <span class=\"redirect\" routerLink=\"/sign-in\">Log In</span></span>\n    </div>\n\n  </div>\n</div>","import { AfterContentInit, AfterViewInit, Component, Input, NgZone } from '@angular/core';\nimport { fabric } from 'fabric';\nimport { EventHandlerService } from '../event-handler.service';\nimport { CustomFabricObject } from '../models';\nimport * as firebase from 'firebase';\n\n@Component({\n  selector: 'app-fabric-canvas',\n  templateUrl: './fabric-canvas.component.html',\n  styleUrls: ['./fabric-canvas.component.scss'],\n})\nexport class FabricCanvasComponent implements AfterContentInit, AfterViewInit {\n  canvas: fabric.Canvas;\n\n  @Input() set imageDataURL(v: string) {\n    if (v) {\n      this.eventHandler.imageDataUrl = v;\n    }\n  }\n\n  constructor(private eventHandler: EventHandlerService, private ngZone: NgZone) {}\n\n  ngAfterContentInit() {\n    this.ngZone.runOutsideAngular(() => {\n      if (this.eventHandler.canvas) {\n        this.eventHandler.canvas.dispose();\n      }\n      this.canvas = new fabric.Canvas('canvas', {\n        selection: false,\n        preserveObjectStacking: true,\n      });\n      this.eventHandler.canvas = this.canvas;\n      this.eventHandler.extendToObjectWithId();\n      fabric.Object.prototype.objectCaching = false;\n      this.addEventListeners();\n      firebase.auth().onAuthStateChanged(user => {\n        if (user) {\n          this.eventHandler.load().then(()=>{setInterval(()=>{this.eventHandler.save()},1000)});\n        }\n      });\n    });\n  }\n\n  ngAfterViewInit() {\n    this.eventHandler.addBGImageSrcToCanvas();\n  }\n\n  private addEventListeners() {\n    this.canvas.on('mouse:down', e => this.ngZone.run(() => this.onCanvasMouseDown(e)));\n    this.canvas.on('mouse:move', e => this.ngZone.run(() => this.onCanvasMouseMove(e)));\n    this.canvas.on('mouse:up', () => this.ngZone.run(() => this.onCanvasMouseUp()));\n    this.canvas.on('selection:created', e => this.ngZone.run(() => this.onSelectionCreated(e as any)));\n    this.canvas.on('selection:updated', e => this.ngZone.run(() => this.onSelectionUpdated(e as any)));\n    this.canvas.on('object:moving', e => this.ngZone.run(() => this.onObjectMoving(e as any)));\n    this.canvas.on('object:scaling', e => this.ngZone.run(() => this.onObjectScaling(e as any)));\n  }\n\n  private onCanvasMouseDown(event: { e: Event }) {\n    this.eventHandler.mouseDown(event.e);\n    this.avoidDragAndClickEventsOfOtherUILibs(event.e);\n  }\n  private onCanvasMouseMove(event: { e: Event }) {\n    this.eventHandler.mouseMove(event.e);\n  }\n  private onCanvasMouseUp() {\n    this.eventHandler.mouseUp();\n  }\n  private onSelectionCreated(e: { target: CustomFabricObject }) {\n    this.eventHandler.objectSelected(e.target);\n  }\n  private onSelectionUpdated(e: { target: CustomFabricObject }) {\n    this.eventHandler.objectSelected(e.target);\n  }\n  private onObjectMoving(e: any) {\n    this.eventHandler.objectMoving(e.target.id, e.target.type, e.target.left, e.target.top);\n  }\n  private onObjectScaling(e: any) {\n    this.eventHandler.objectScaling(\n      e.target.id,\n      e.target.type,\n      { x: e.target.scaleX, y: e.target.scaleY },\n      { left: e.target.left, top: e.target.top },\n    );\n  }\n\n  private avoidDragAndClickEventsOfOtherUILibs(e: Event) {\n    e.stopPropagation();\n  }\n}\n","<div class=\"canvas-wrapper\">\n  <canvas id=\"canvas\"></canvas>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from \"../../shared/services/auth.service\";\n\n@Component({\n  selector: 'app-sign-up',\n  templateUrl: './sign-up.component.html',\n  styleUrls: ['./sign-up.component.css']\n})\n\nexport class SignUpComponent implements OnInit {\n\n  constructor(\n    public authService: AuthService\n  ) { }\n\n  ngOnInit() { }\n\n}","<div class=\"displayTable\">\n  <div class=\"displayTableCell\">\n\n    <div class=\"logo\">\n      <h3><a href=\"https://github.com/jk3vinl/pencil\">Kevin's Pencil Project</a></h3>\n    </div>\n\n    <div class=\"authBlock\">\n      <h3>Sign Up</h3>\n\n      <div class=\"formGroup\">\n        <input type=\"email\" class=\"formControl\" placeholder=\"Email Address\" #userEmail required>\n      </div>\n\n      <div class=\"formGroup\">\n        <input type=\"password\" class=\"formControl\" placeholder=\"Password\" #userPwd required>\n      </div>\n\n      <div class=\"formGroup\">\n        <input type=\"button\" class=\"btn btnPrimary\" value=\"Sign Up\" (click)=\"authService.SignUp(userEmail.value, userPwd.value)\">\n      </div>\n\n      <div class=\"formGroup\">\n        <span class=\"or\"><span class=\"orInner\">Or</span></span>\n      </div>\n\n      <!-- Continue with Google -->\n      <div class=\"formGroup\">\n        <button type=\"button\" class=\"btn googleBtn\" (click)=\"authService.GoogleAuth()\">\n          <i class=\"fab fa-google-plus-g\"></i>\n          Continue with Google\n        </button>\n      </div>\n      \n    </div>\n\n    <div class=\"redirectToLogin\">\n      <span>Already have an account? <span class=\"redirect\" routerLink=\"/sign-in\">Log In</span></span>\n    </div>\n  </div>\n\n</div>\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}